"use strict";angular.module("config",[]).constant("ENV",{name:"prod",endpoint:"https://wao-production.appspot.com",fb_id:"192212211227367",pusher_key:"f61fd91c4371158fb2e8",pusher_channel_namespace:"",mixpanel_token:"808e26397cdf342e855d65b8ae1c53d6",google_visit_landing_page_conversion_label:"si8dCJbfoWwQiYWq3AM",google_conversion_id:998933129,account_url:"gotitapp.zendesk.com"}),angular.module("waoStudentApp",["ngRoute","ngSanitize","config","facebook","LocalStorageModule","ngFileUpload","ui.bootstrap","pusher-angular","angucomplete-alt","pusher-angular","angularRandomString","ng.deviceDetector","dibari.angular-ellipsis","zendeskWidget"]).config(["ENV","FacebookProvider",function(a,b){b.init(a.fb_id)}]).config(["$sceDelegateProvider",function(a){a.resourceUrlWhitelist(["self"," https://storage.googleapis.com/**"])}]).config(["$httpProvider",function(a){a.interceptors.push(["$rootScope","$q",function(a,b){return{response:function(a){return a},responseError:function(c){var d=c.status;return 401==d&&a.logout(),b.reject(c)}}}])}]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/login",{templateUrl:"views/login.html",controller:"LoginCtrl"}).when("/profile",{templateUrl:"views/profile.html",controller:"ProfileCtrl"}).when("/problem/:problem_id",{templateUrl:"views/problem.html",controller:"ProblemCtrl"}).otherwise({redirectTo:"/"})}]).config(["ENV","$mixpanelProvider",function(a,b){b.apiKey(a.mixpanel_token)}]).config(["ENV","ZendeskWidgetProvider",function(a,b){b.init({accountUrl:a.account_url,beforePageLoad:function(a){a.hide()}})}]),angular.module("waoStudentApp").controller("MainCtrl",["$scope","$location","$uibModal","Problem","State","FileUpload","PusherService","AccessToken","$timeout","ConfigService","Explanation","$window","$mixpanel","LIVE_FEED_DATA",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){function o(a){var b,c,d;for(d=a.length;d;d--)b=Math.floor(Math.random()*d),c=a[d-1],a[d-1]=a[b],a[b]=c}a.problems=null,a.asker_state=null,a.new_problem_error="",a.input.spreadsheet_shared_url="",a.input.spreadsheet_software=1,a.file_uploading_indicator_show=!1,a.input.text="",a.input.file=null,a.problem_id=0,a.currentPage=1,a.problems_per_page=30,a.hasNextPage=!1,a.selectedTab="",a.last_pusher_received_timestamp=0;var p=a.getToken();a.isMyQuestion=function(b){return b.asker_id==a.getAccountID()};var q=function(a){return a>1?"s":""};a.getSoftwareName=function(b){for(var c=0;c<a.spreadsheet_software_list.length;c++)if(a.spreadsheet_software_list[c].id==b)return a.spreadsheet_software_list[c].name},a.getTime=function(a){var b=new Date;a=new Date(a);var c=b-a;c=Math.floor(c/1e3);var d=Math.floor(c/86400);c%=86400;var e=Math.floor(c/3600);c%=3600;var f=Math.floor(c/60);c%=60;var g=c;return d?" "+d+" day"+q(d)+" ago":e?" "+e+" hour"+q(e)+" ago":f?" "+f+" minute"+q(f)+" ago":g?" "+g+" second"+q(g)+" ago":void 0},a.plural=function(a){return a>1?"stars":"star"},a.init_main=function(){a.input.category=-10,p&&(j.getSpreadsheetTopics(p).then(function(b){a.spreadsheet_topic_list=b.data.data;for(var c=a.spreadsheet_topic_list.length-1;c>=0;c--)a.spreadsheet_topic_list[c].id<0&&a.spreadsheet_topic_list.splice(c,1)}),a.isLiveFeedTabSelected()?a.showLiveFeed():a.showMyQuestion(),e.getAskerState(p).then(function(b){b.data.data[0].timestamp>a.last_pusher_received_timestamp&&(a.asker_state=b.data.data[0],a.last_pusher_received_timestamp=a.asker_state.timestamp),console.log(a.asker_state),g.connect(p);var c=g.subscribe("account",{accountType:h.getAccountType(),accountId:h.getAccountId()});c||i(function(){a.checkRating()},1e3),g.bind("account","state_change",a.onStateChanged),g.bind("account","thumbnail",a.onThumbnailChanged),g.bind("account","force_log_out",a.forceLogOut),g.bind("account","pusher:subscription_succeeded",a.onPusherAccountSubsciptionSucceeded)},function(a){}))},a.getProblemHistory=function(b){d.getProblemHistory(p,b).then(function(c){console.log("problem history"),a.problems=c.data.data,a.hasNextPage=!1,a.problems.length>a.problems_per_page&&(a.problems.pop(),a.hasNextPage=!0),a.currentPage=b,console.log(a.problems)},function(a){})},a.getProblemLiveFeed=function(){var b=n,c=b.length;o(b);for(var d=new Date,e=0;c>e;e++){b[e].spreadsheet_error={},b[e].problem_state={state:"Complete"},b[e].explainer_rating={score:3+Math.round(2*Math.random())},b[e].spreadsheet_shared_thumbnail_url=null;var f=new Date(d.getTime()-6e4-1e3*Math.floor(e*Math.random()*60*60));b[e].created=f.toISOString()}a.hasNextPage=!1,a.currentPage=1,a.problems=b,console.log(b)},a.checkRating=function(){if(a.asker_state&&a.asker_state.state&&"rating"==a.asker_state.state.toLowerCase()){d.getProblem(p,a.asker_state.explanation.id).then(function(b){console.log(b),a.rating_explanations=b.data.data.explanation.data.messages.data,a.rating_problem=b.data.data,a.point=0,console.log(a.rating_explanations)},function(a){console.log(a)});var b=c.open({templateUrl:"rating.html",scope:a,keyboard:!1,backdrop:"static",size:"lg"});a.showDialog(b)}},a.onPusherAccountSubsciptionSucceeded=function(){console.log("onPusherAccountSubsciptionSucceeded"),i(function(){e.getAskerState(p).then(function(b){b.data.data[0].timestamp>a.last_pusher_received_timestamp&&(a.asker_state=b.data.data[0],a.last_pusher_received_timestamp=a.asker_state.timestamp,a.checkRating())},function(a){})},1e3)},a.onStateChanged=function(b){console.log("State changed"),console.log(b);var c=b.data[0];if(c&&c.timestamp>a.last_pusher_received_timestamp){if(a.last_pusher_received_timestamp=c.timestamp,a.asker_state=c,a.checkRating(),a.asker_state.state&&"chatting"==a.asker_state.state.toLowerCase()&&a.problem_id==a.asker_state.problem.id){var d=a.problem_id;a.problem_id=null,a.goToProblemDetail(d)}null!==a.asker_state.state||null===a.problem_id&&!a.rating_problem||(a.hideDialog(),a.problem_id&&a.showRepostModal(),a.problem_id=null,a.rating_problem=null,a.showMyQuestion())}},a.onThumbnailChanged=function(b){if(console.log("Thumbnail changed"),console.log(b),a.problems)for(var c=a.problems.length,d=0;c>d;d++)if(a.problems[d].file_id==b.file_id)return void(a.problems[d].file_thumbnail_url=b.file_thumbnail_url)},a.showNewProblemModal=function(){e.checkAvailability(p).then(function(b){var d=b.data.data.availability,e=b.data.data.message;if(0==d)return void a.showUnavailableModal(e);console.log(a.input.file);var f=c.open({templateUrl:"newProblemModal.html",scope:a,keyboard:!1,backdrop:"static"});a.showDialog(f)},function(a){console.log(a)})},a.showUnavailableModal=function(b){a.unavailable_message=b;var d=c.open({templateUrl:"unavailableModal.html",scope:a,keyboard:!1,backdrop:"static"});a.showDialog(d)},a.showRepostModal=function(){var b=c.open({templateUrl:"repostModal.html",scope:a,keyboard:!1,backdrop:"static"});a.showDialog(b)},a.showMatchingExpertModal=function(){a.resetProblemError();var b=c.open({templateUrl:"matchingExpertModal.html",scope:a,keyboard:!1,backdrop:"static"});a.showDialog(b)},a.goToProblemDetail=function(c){a.hideDialog(),b.path("/problem/"+c)},a.postNewProblem=function(){if(a.resetProblemError(),-10!=a.input.category)a.input.spreadsheet_topic=a.input.category;else{if(!a.input.topic)return void a.setProblemError("Please let us know what do you need help with.");a.input.spreadsheet_topic=a.input.topic.originalObject.id}if(!a.input.text)return void a.setProblemError("Please fill in additional information for your question");if(a.input.file){a.input.file;if(!a.isValidImageFile()&&!a.isValidExcelFile())return void a.setProblemError("Invalid file attachment.")}if(a.input.spreadsheet_shared_url&&0!==a.input.spreadsheet_shared_url.indexOf("https://docs.google.com/spreadsheets/d/"))return void a.setProblemError("Invalid URL for a shared Google Sheets.");if(!a.file_uploading_indicator_show)if(a.file_uploading_indicator_show=!0,a.input.file)a.isValidImageFile()?f.uploadFile(p).then(function(b){console.log(b.data);var c=b.data.data[0].upload_url;c&&f.uploadFileToGAE(a.input.file,c).then(function(b){var c=b.data.data[0];if(console.log(c),a.input.spreadsheet_shared_url)f.uploadSharedUrl(p,a.input.spreadsheet_shared_url).then(function(b){var d=b.data.data,e={spreadsheet_software:a.input.spreadsheet_software,spreadsheet_topic_id:a.input.spreadsheet_topic,text:a.input.text,file_url:c.file_url,spreadsheet_shared_url:a.input.spreadsheet_shared_url,spreadsheet_shared_thumbnail_url:d.thumbnail_url,spreadsheet_shared_id:d.id,spreadsheet_shared_type:d.type};a.submitNewProblem(e,p)},function(b){a.setProblemError(b),a.file_uploading_indicator_show=!1});else{var d={spreadsheet_software:a.input.spreadsheet_software,spreadsheet_topic_id:a.input.spreadsheet_topic,text:a.input.text,file_url:c.file_url};a.submitNewProblem(d,p)}},function(b){a.setProblemError(b),a.file_uploading_indicator_show=!1},function(a){var b=parseInt(100*a.loaded/a.total);console.log("progress: "+b+"% "+a.config.data.file.name)})},function(b){a.setProblemError(b),a.file_uploading_indicator_show=!1}):a.isValidExcelFile()&&f.uploadExcelFile(p).then(function(b){console.log(b.data);var c=b.data.data[0].upload_url;c&&f.uploadFileToGAE(a.input.file,c).then(function(b){var c=b.data.data;if(a.input.spreadsheet_shared_url)f.uploadSharedUrl(p,a.input.spreadsheet_shared_url).then(function(b){var d=b.data.data,e={spreadsheet_software:a.input.spreadsheet_software,spreadsheet_topic_id:a.input.spreadsheet_topic,text:a.input.text,file_url:c.file_url,file_id:c.id,file_thumbnail_url:c.thumbnail_url,file_type:c.type,spreadsheet_shared_url:a.input.spreadsheet_shared_url,spreadsheet_shared_thumbnail_url:d.thumbnail_url,spreadsheet_shared_id:d.id,spreadsheet_shared_type:d.type};a.submitNewProblem(e,p)},function(b){a.setProblemError(b),a.file_uploading_indicator_show=!1});else{var d={spreadsheet_software:a.input.spreadsheet_software,spreadsheet_topic_id:a.input.spreadsheet_topic,text:a.input.text,file_url:c.file_url,file_id:c.id,file_thumbnail_url:c.thumbnail_url,file_type:c.type};a.submitNewProblem(d,p)}},function(b){console.log("Error status: "+b.status),a.setProblemError(b),a.file_uploading_indicator_show=!1},function(a){var b=parseInt(100*a.loaded/a.total);console.log("progress: "+b+"% "+a.config.data.file.name)})},function(b){console.log("Error status: "+b.status),a.setProblemError(b),a.file_uploading_indicator_show=!1});else{var b={spreadsheet_software:a.input.spreadsheet_software,spreadsheet_topic_id:a.input.spreadsheet_topic,text:a.input.text};a.input.spreadsheet_shared_url?f.uploadSharedUrl(p,a.input.spreadsheet_shared_url).then(function(c){var d=c.data.data;b.spreadsheet_shared_url=a.input.spreadsheet_shared_url,b.spreadsheet_shared_thumbnail_url=d.thumbnail_url,b.spreadsheet_shared_id=d.id,b.spreadsheet_shared_type=d.type,a.submitNewProblem(b,p)},function(b){a.setProblemError(b),a.file_uploading_indicator_show=!1}):a.submitNewProblem(b,p)}},a.submitNewProblem=function(b,c){d.postProblem(b,c).then(function(b){console.log(b),a.problem_id=b.data.data.id,m.track("Post Question",{uid:Number(a.getAccountID()),qid:Number(a.problem_id),software_used:a.getSoftwareName(a.input.spreadsheet_software),topic:a.getCategory(a.input.category),formula:a.input.topic&&a.input.topic.originalObject.name,gsheets_link:a.input.spreadsheet_shared_url?"YES":"NO",attachment:a.input.file?a.input.file.name.split(".").pop().toUpperCase():"",description:a.input.text}),a.showMatchingExpertModal(),a.file_uploading_indicator_show=!1},function(b){a.setProblemError(b),a.file_uploading_indicator_show=!1})},a.setProblemError=function(b){b&&("string"==typeof b?a.new_problem_error=b:b.data?a.new_problem_error=b.data.error_message:a.new_problem_error="Unknown error")},a.resetProblemError=function(){a.new_problem_error=""},a.pusherAskerUnbinding=function(){g.unbind("account")},a.logoutFromMainPage=function(){a.logout()},a.showLogoutConfirmModal=function(){var b=c.open({templateUrl:"logoutConfirmModal.html",scope:a,keyboard:!1,backdrop:"static"});a.showDialog(b)},a.showLiveFeed=function(){a.currentPage=1,(null===a.problems||"live feed"!=a.mainPage.selectedTab)&&m.track("View Live Feed",{uid:Number(a.getAccountID())}),a.getProblemLiveFeed(),a.mainPage.selectedTab="live feed"},a.showMyQuestion=function(){a.currentPage=1,(null===a.problems||"my question"!=a.mainPage.selectedTab)&&m.track("View My Questions",{uid:Number(a.getAccountID())}),a.getProblemHistory(a.currentPage),a.mainPage.selectedTab="my question"},a.inputTopicChanged=function(b){b||(a.input.topic=null)};var r=function(b){a.$broadcast("angucomplete-alt:clearInput",b)};a.clearInput=function(a,b){console.log(a),a||r(b)},a.getThumbnail=function(b){return b.file_thumbnail_url?b.file_thumbnail_url:b.spreadsheet_shared_thumbnail_url?b.spreadsheet_shared_thumbnail_url:1==b.spreadsheet_software?a.googlesheet_thumbnail:a.excel_thumbnail},a.goToPreviousPage=function(){a.currentPage>1&&(a.isLiveFeedTabSelected()?a.getProblemLiveFeed(a.currentPage-1):a.isMyQuestionSelected()&&a.getProblemHistory(a.currentPage-1))},a.goToNextPage=function(){a.isLiveFeedTabSelected()?a.getProblemLiveFeed(a.currentPage+1):a.isMyQuestionSelected()&&a.getProblemHistory(a.currentPage+1)},a.isLiveFeedTabSelected=function(){return"live feed"==a.mainPage.selectedTab},a.isMyQuestionSelected=function(){return"my question"==a.mainPage.selectedTab},a.rateExplanation=function(b){return a.asker_state&&a.asker_state.explanation&&a.rating_problem?void k.rateExplanation({explanation_id:a.asker_state.explanation.id,score:b},p).then(function(c){console.log(c),a.hideDialog(),m.track("Rating",{uid:Number(a.getAccountID()),qid:Number(a.rating_problem.id),rate:Number(b)})},function(b){console.log(b),a.hideDialog()}):void a.hideDialog()},a.takeSurvey=function(b){return a.asker_state&&a.asker_state.explanation&&a.rating_problem?void k.rateExplanation({explanation_id:a.asker_state.explanation.id,score:b},p).then(function(c){console.log(c),m.track("Rating",{uid:Number(a.getAccountID()),qid:Number(a.rating_problem.id),rate:Number(b)}),a.hideDialog(),a.survey_url&&(m.track("Take Survey",{uid:Number(a.getAccountID()),qid:Number(a.rating_problem.id)}),l.location.href=a.survey_url)},function(b){console.log(b),a.hideDialog()}):void a.hideDialog()},a.$on("$destroy",function(){console.log("ondestroy"),console.log("disconnect pusher"),a.pusherAskerUnbinding(),a.resetAskInput()}),a.changeAskTopic=function(){m.track("Try a Topic",{uid:Number(a.getAccountID()),topic:a.getCategory(a.input.category)})},a.resetAskInput=function(){a.input.spreadsheet_shared_url="",a.input.spreadsheet_software=1,a.input.spreadsheet_topic=0,a.input.file=null,a.input.text="",a.input.category=-10,a.input.topic=null},a.init_main()}]),angular.module("waoStudentApp").controller("LoginCtrl",["$scope","Auth","AccessToken","Profile","$location","$uibModal","$mixpanel","GoogleAdWords",function(a,b,c,d,e,f,g,h){a.submitting=!1,a.input_login={email:"",password:"",confirm_password:"",tel:null,grade_id:a.grade_list&&a.grade_list.length?a.grade_list[0].id:null,nickname:"",sms_code:null},a.error_message="";var i={email:"Invalid email address.",password:"Please enter your password.",confirm_password:"Please confirm your password.",tel:"Invalid phone number.",grade_id:"Please select your education level.",nickname:"Please enter your nickname.",sms_code:"Please enter your verification code."},j=function(b){for(var c=0;c<b.length;c++)if(null==a.input_login[b[c]]||""===a.input_login[b[c]])return console.log(a.input_login[b[c]]),l(i[b[c]]),!1;return!0};a.getExpertAvailable=function(){if(!a.config_data)return"";if("always_available"==a.config_data.wao_available.mode)return!0;var b=moment().tz("America/Los_Angeles").format("HH:mm"),c=a.config_data.wao_available.from_time,d=a.config_data.wao_available.to_time;return b>=c&&d>=b},a.getAvailableMessage=function(){if(!a.config_data)return"";if("always_available"==a.config_data.wao_available.mode)return"Experts are available now!";var b=moment().tz("America/Los_Angeles").format("HH:mm"),c=a.config_data.wao_available.from_time,d=a.config_data.wao_available.to_time;if(b>=c&&d>=b)return"Experts are available now!";var e=parseInt(c[0]+c[1]),f=12>e?"am":"pm";e>=12&&(e-=12),e=10>e?"0"+e:""+e;var g=e+":"+c[3]+c[4]+f,h=parseInt(d[0]+d[1]),i=12>h?"am":"pm";h>=12&&(h-=12),h=10>h?"0"+h:""+h;var j=h+":"+d[3]+d[4]+i;return"Experts will be available between "+g+" and "+j},a.getAvailableTime=function(){if(!a.config_data)return"";if("always_available   "==a.config_data.wao_available.mode)return"Experts are available now!";var b=a.config_data.wao_available.from_time,c=a.config_data.wao_available.to_time,d=parseInt(b[0]+b[1]),e=12>d?"am":"pm";d>=12&&(d-=12),d=10>d?"0"+d:""+d;var f=d+":"+b[3]+b[4]+e,g=parseInt(c[0]+c[1]),h=12>g?"am":"pm";g>=12&&(g-=12),g=10>g?"0"+g:""+g;var i=g+":"+c[3]+c[4]+h;return"Experts will be available between "+f+" and "+i},a.signUpEmail=function(){if(!a.submitting){var d=["email","password","confirm_password","nickname","grade_id"];if(j(d)){if(a.input_login.password!=a.input_login.confirm_password)return void l("These passwords don't match.");a.submitting=!0,b.signUpByEmail(a.input_login.email,a.input_login.password,a.input_login.nickname,a.input_login.grade_id).then(function(b){c.set(b),g.alias(Number(a.getAccountID())),g.track("Start Signing Up",{uid:Number(a.getAccountID()),signup_method:"Email",trigger:a.signup_click_position}),g.track("Profile Details",{uid:Number(a.getAccountID()),education_level:a.getEducationLevel(a.input_login.grade_id)}),g.track("Account Created",{uid:Number(a.getAccountID())}),a.submitting=!1,e.path("/main")},function(b){console.log(b),l(b.data.error_message),4e4==b.data.error_code&&b.data.error_data!=={}&&l(b.data.error_data[Object.keys(b.data.error_data)[0]][0]),a.submitting=!1})}}},a.connectFacebook=function(){a.submitting||(a.submitting=!0,b.connectFB().then(function(b){console.log(b),c.set(b),b.is_signup?(g.alias(Number(a.getAccountID())),g.track("Start Signing Up",{uid:Number(a.getAccountID()),signup_method:"Facebook",trigger:a.signup_click_position})):(g.identify(Number(a.getAccountID())),g.track("Login",{uid:Number(a.getAccountID()),login_method:"Facebook"})),a.submitting=!1,b.is_signup||!b.nickname?k():e.path("/main")},function(b){console.log(b),b&&b.data.error_message&&l(b.data.error_message),a.submitting=!1}))},a.loginEmail=function(){if(!a.submitting){var d=["email","password"];j(d)&&(a.submitting=!0,b.loginByEmail(a.input_login.email,a.input_login.password).then(function(b){c.set(b),g.identify(Number(a.getAccountID())),g.track("Login",{uid:Number(a.getAccountID()),login_method:"Email"}),a.submitting=!1,b.nickname?e.path("/main"):k()},function(b){console.log(b),l(b.data.error_message),a.submitting=!1}))}};var k=function(){a.resetError(),a.input_login.grade_id=a.grade_list&&a.grade_list.length?a.grade_list[0].id:null;var b=f.open({templateUrl:"modalAccount.html",scope:a,keyboard:!1,backdrop:"static"});a.showDialog(b)};a.newInfo=function(){if(!a.submitting){var b=["nickname","grade_id"];if(j(b)){var f=a.getToken();a.submitting=!0,d.newInfo(f,a.input_login.nickname,a.input_login.grade_id).then(function(b){console.log(b),c.setInfo(a.input_login.nickname,a.input_login.grade_id),g.track("Profile Details",{uid:Number(a.getAccountID()),education_level:a.getEducationLevel(a.input_login.grade_id)}),g.track("Account Created",{uid:Number(a.getAccountID())}),a.submitting=!1,e.path("/main")},function(b){console.log(b),l(b.data.error_message),a.submitting=!1})}}},a.showSignupModal=function(b){a.resetError(),a.signup_click_position=b;var c=f.open({templateUrl:"modalSignup.html",scope:a,keyboard:!1,backdrop:"static"});a.showDialog(c)},a.showLoginModal=function(){a.resetError();var b=f.open({templateUrl:"modalLogin.html",scope:a,keyboard:!1,backdrop:"static"});a.showDialog(b)},a.showError=function(){return a.error_message&&!a.getDialog()};var l=function(b){a.error_message=b};a.resetError=function(){a.error_message=""},a.init_login=function(){var a=!0;c.get()&&(c.getNickname()?(a=!1,e.path("/main")):setTimeout(function(){k()},1e3)),a&&(g.track("Visit Landing Page"),h.sendVisitLandingPageConversion())},a.init_login()}]),angular.module("waoStudentApp").controller("ProfileCtrl",["$scope","AccessToken","Profile","$mixpanel",function(a,b,c,d){a.profile_error_msg="",a.password_error_msg="",a.profile_success_msg="",a.password_success_msg="";var e=a.getToken();a.input={current_password:"",new_password:"",confirm_password:""},a.account_type=b.getLoginType(),c.getInfo(e).then(function(b){console.log(b),a.input.email=b.data.data.email,a.input.grade_id=b.data.data.grade_id,a.input.nickname=b.data.data.nickname},function(a){console.log(a)}),a.updateInfo=function(){c.updateInfo(e,a.input.grade_id).then(function(b){a.resetProfileError(),h("You've successfully updated profile.")},function(b){a.resetProfileSuccess(),g(b.data.error_message)})};var f=function(){return a.resetPasswordError(),a.input.current_password?a.input.new_password?a.input.confirm_password?a.input.new_password!=a.input.confirm_password&&i("New password and it's confirmation don't match."):i("Please confirm your new password."):i("Please enter new password."):i("Please enter your current password."),a.password_error_msg};a.changePassword=function(){f()||c.changePassword(e,a.input.current_password,a.input.new_password).then(function(b){a.resetPasswordError(),j("You've successfully changed your password.")},function(b){a.resetPasswordSuccess(),i(b.data.error_message)})};var g=function(b){a.profile_error_msg=b};a.resetProfileError=function(){a.profile_error_msg=""};var h=function(b){a.profile_success_msg=b};a.resetProfileSuccess=function(){a.profile_success_msg=""};var i=function(b){a.password_error_msg=b};a.resetPasswordError=function(){a.password_error_msg=""};var j=function(b){a.password_success_msg=b};a.resetPasswordSuccess=function(){a.password_success_msg=""},d.track("View Account Settings",{uid:Number(a.getAccountID())})}]),angular.module("waoStudentApp").controller("ProblemCtrl",["$scope","$location","$uibModal","$routeParams","Problem","FileUpload","AccessToken","Explanation","PusherService","$interval","$sce","randomString","$window","$mixpanel",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){a.problem=null,a.chat_error="",a.messages=[],a.chat_enabled=!1,a.file_uploading_indicator_show=!1,a.input.chat_message="",a.input.file=null,a.input.rating=0,a.session_time=0,a.session_timer=null,a.pusher_explanation_binding=!1,a.can_end_chat_session=!1,a.preview_url=null,a.ratingExplanation=!1,a.total_message=0,a.init_chat=function(){a.getProblem()},a.getProblem=function(){var b=a.getToken();e.getProblem(b,d.problem_id).then(function(c){console.log("problem detail"),console.log(c.data.data),console.log(c.data.data.explanation.data.messages.data),a.problem=c.data.data,a.messages=a.problem.explanation.data.messages.data,"chatting"==a.problem.problem_state.state.toLowerCase()&&(a.chat_enabled=!0,a.startSessionTimer(),a.can_end_chat_session=!0),a.buildMessageList(null),i.connect(b),i.subscribe("account",{accountType:g.getAccountType(),accountId:g.getAccountId()}),a.pusherExplanationBinding(),console.log("account state changed"),i.bind("account","state_change",a.onStateChanged),i.bind("account","thumbnail",a.onThumbnailChanged),i.bind("account","force_log_out",a.forceLogOut),n.track("View Question",{uid:Number(a.getAccountID()),qid:Number(a.problem.id)})},function(a){})},a.getDownloadUrl=function(a){return a?"https://docs.google.com/spreadsheets/d/"+a+"/export":null},a.buildMessageList=function(b){if(b){if(b.file_url){var c={asker_id:b.asker_id,created:b.created,explainer_id:b.explainer_id,file_thumbnail_url:b.file_thumbnail_url,file_id:b.file_id,file_url:b.file_url,file_download:a.getDownloadUrl(b.file_id),message:null,type:b.file_id?"excel":"image"};a.messages.push(c)}b.message&&a.messages.push({asker_id:b.asker_id,created:b.created,explainer_id:b.explainer_id,file_thumbnail_url:null,file_id:null,file_url:null,message:b.message,type:"text"}),a.total_message++}else{var d=[],e=a.messages.length;a.total_message=a.messages.length;for(var f=0;e>f;f++){var h=a.messages[f];if(h.file_url){var c={asker_id:h.asker_id,created:h.created,explainer_id:h.explainer_id,file_thumbnail_url:h.file_thumbnail_url,file_id:h.file_id,file_url:h.file_url,file_download:a.getDownloadUrl(h.file_id),message:null,type:h.file_id?"excel":"image"};d.push(c),a.showPreview(c)}h.message&&d.push({asker_id:h.asker_id,created:h.created,explainer_id:h.explainer_id,file_thumbnail_url:null,file_id:null,file_url:null,message:h.message,type:"text"})}var i=a.problem;if(d.unshift({asker_id:g.getAccountId(),created:i.created,explainer_id:null,file_thumbnail_url:null,file_id:null,file_url:null,message:i.text,spreadsheet_software:a.getSpreadsheetSoftware(i.spreadsheet_software),spreadsheet_topic:i.spreadsheet_topic.name,type:"question"}),i.spreadsheet_shared_url){var c={asker_id:g.getAccountId(),created:i.created,explainer_id:null,file_thumbnail_url:i.spreadsheet_shared_thumbnail_url,file_id:i.spreadsheet_shared_id,file_url:null,file_download:a.getDownloadUrl(i.spreadsheet_shared_id),message:null,type:"google"};d.unshift(c),a.showPreview(c)}if(i.file_url){var c={asker_id:g.getAccountId(),created:i.created,explainer_id:null,file_thumbnail_url:i.file_thumbnail_url,file_id:i.file_id,file_url:i.file_url,file_download:a.getDownloadUrl(i.file_id),message:null,type:i.file_id?"excel":"image"};d.unshift(c),a.showPreview(c)}a.messages=d,console.log(a.messages)}},a.pusherExplanationBinding=function(){a.pusher_explanation_binding||a.chat_enabled&&(console.log("binding explanation"),console.log(a.problem.explanation.data.id),a.pusher_explanation_binding=!0,i.subscribe("explanation",{id:a.problem.explanation.data.id}),i.bind("explanation","new_message",a.onNewMessage))},a.startSessionTimer=function(){var b=Math.floor(new Date(a.problem.explanation.data.expiration).getTime()/1e3),c=Math.floor((new Date).getTime()/1e3);console.log("start session"),console.log("expired time: "+b),console.log("expired time: "+c),a.session_time=b-c,a.session_time<=0||null===a.session_timer&&(a.session_timer=j(function(){a.session_time>0&&(a.session_time--,a.session_time%10===0&&(a.session_time=Math.floor(new Date(a.problem.explanation.data.expiration).getTime()/1e3)-Math.floor((new Date).getTime()/1e3),a.session_time<=0&&(a.session_time=0)))},1e3))},a.endSessionTimer=function(){a.session_timer&&(j.cancel(a.session_timer),a.session_time=0,a.session_timer=null)},a.convertSessionTime=function(){var b=Math.floor(a.session_time/60),c=a.session_time-60*b;return 10>b&&(b="0"+b),10>c&&(c="0"+c),b+":"+c},a.onStateChanged=function(b){console.log("State changed"),console.log(b),console.log(a.problem),a.asker_state=b.data[0],a.asker_state.state&&a.asker_state.problem.id==a.problem.id&&("rating"==a.asker_state.state.toLowerCase()?(a.endSessionTimer(),a.showRatingModal(),a.chat_enabled&&n.track("End Session",{uid:Number(a.getAccountID()),qid:Number(a.problem.id),method:"Timeout",session_time:Number(a.asker_state.chatting_timeout),number_of_messages:Number(a.total_message)}),a.chat_enabled=!1):"chatting"==a.asker_state.state.toLowerCase()&&(a.chat_enabled=!0,a.problem.explanation.data.expiration=a.asker_state.explanation.expiration,a.pusherExplanationBinding(),a.startSessionTimer()))},a.onThumbnailChanged=function(b){if(console.log("Thumbnail changed"),console.log(b),a.messages)for(var c=a.messages.length,d=0;c>d;d++)if(a.messages[d].file_id==b.file_id)return void(a.messages[d].file_thumbnail_url=b.file_thumbnail_url)},a.onNewMessage=function(b){console.log("new message"),console.log(b),b.data.asker_id!=a.getAccountID()&&(a.buildMessageList(b.data),3==b.data.section&&(a.can_end_chat_session=!0,a.problem.final_solution_created=b.data.created),a.scrollToBottomChatBox(),n.track("Messaging",{uid:Number(a.getAccountID()),qid:a.problem?Number(a.problem.id):0,eid:a.problem&&a.problem.explainer_id?Number(a.problem.explainer_id):0,mode:a.getAccountID()==b.data.asker_id?"Send":"Receive",attachment:b.data.file_url?b.data.file_id?"SPREADSHEET":"IMAGE":"",content_length:b.data.message?b.data.message.length:0}))},a.scrollToBottomChatBox=function(){var a=$("#list_chat");a.animate({scrollTop:a.prop("scrollHeight")},1e3)},a.focusInput=function(){$("#quick_chat").focus()},a.postNewMessage=function(){if(a.resetChatError(),a.input.chat_message||a.input.file){if(a.input.file){a.input.file;if(!a.isValidImageFile()&&!a.isValidExcelFile())return void a.setProblemError("Invalid file attachment")}if(!a.file_uploading_indicator_show){a.file_uploading_indicator_show=!0;var b=a.getToken();if(a.input.file)a.isValidImageFile()?f.uploadFile(b).then(function(c){var d=c.data.data[0].upload_url;d&&f.uploadFileToGAE(a.input.file,d).then(function(c){a.input.file=null;var d={explanation_id:a.problem.explanation.data.id,message:a.input.chat_message,file_url:c.data.data[0].file_url};a.submitNewMessage(d,b)},function(b){console.log("Error status: "+b.status),a.file_uploading_indicator_show=!1},function(a){var b=parseInt(100*a.loaded/a.total);console.log("progress: "+b+"% "+a.config.data.file.name)})},function(b){console.log("Error status: "+b.status),a.file_uploading_indicator_show=!1}):a.isValidExcelFile()&&f.uploadExcelFile(b).then(function(c){var d=c.data.data[0].upload_url;d&&f.uploadFileToGAE(a.input.file,d).then(function(c){a.input.file=null;var d=c.data.data,e={explanation_id:a.problem.explanation.data.id,message:a.input.chat_message,file_url:d.file_url,file_id:d.id,file_thumbnail_url:d.thumbnail_url,file_type:d.type};a.submitNewMessage(e,b)},function(b){console.log("Error status: "+b.status),a.file_uploading_indicator_show=!1},function(a){var b=parseInt(100*a.loaded/a.total);console.log("progress: "+b+"% "+a.config.data.file.name)})},function(b){console.log("Error status: "+b.status),a.file_uploading_indicator_show=!1});else{var c={explanation_id:a.problem.explanation.data.id,message:a.input.chat_message};a.submitNewMessage(c,b)}}}},a.submitNewMessage=function(b,c){h.postMessage(b,c).then(function(b){console.log(b);var c=b.data.data;a.buildMessageList(c),a.scrollToBottomChatBox(),n.track("Messaging",{uid:Number(a.getAccountID()),qid:a.problem?Number(a.problem.id):0,eid:a.problem&&a.problem.explainer_id?Number(a.problem.explainer_id):0,mode:a.getAccountID()==c.asker_id?"Send":"Receive",attachment:c.file_url?c.file_id?"SPREADSHEET":"IMAGE":"",content_length:c.message?c.message.length:0}),a.input.chat_message="",a.file_uploading_indicator_show=!1},function(b){a.file_uploading_indicator_show=!1})},a.setChatError=function(b){b&&("string"==typeof b?a.chat_error=b:b.data?b.data.error_code?a.chat_error=b.data.error_code+": "+b.data.error_message:a.chat_error=b.data.error_message:a.chat_error="Unknown error")},a.showRatingModal=function(){var b=c.open({templateUrl:"ratingModal.html",scope:a,keyboard:!1,backdrop:"static"});a.showDialog(b)},a.rateExplanation=function(){if(!a.input.rating)return void a.setChatError("Invalid data");a.resetChatError(),a.ratingExplanation=!0;var b=a.getToken();h.rateExplanation({explanation_id:a.problem.explanation.data.id,score:a.input.rating},b).then(function(b){console.log(b),a.problem.problem_state.state="Complete",a.goToMain(),n.track("Rating",{uid:Number(a.getAccountID()),qid:Number(a.problem.id),rate:Number(a.input.rating)})},function(b){a.setChatError(b),a.ratingExplanation=!1,a.hideDialog()})},a.endChatSession=function(){if(a.problem&&a.chat_enabled&&a.can_end_chat_session){var b=a.getToken();h.endChatSession({problem_id:a.problem.id},b).then(function(b){console.log("end chat session successfully"),a.chat_enabled=!1,n.track("End Session",{uid:Number(a.getAccountID()),qid:Number(a.problem.id),method:"Forced",session_time:Number(b.data.data.session_time),number_of_messages:Number(a.total_message)})},function(a){})}},a.showEndChatSessionConfirmation=function(){var b=c.open({templateUrl:"endChatSessionModal.html",scope:a,keyboard:!1,backdrop:"static"});a.showDialog(b)},a.goToMain=function(){"rating"==a.problem.problem_state.state.toLowerCase()&&a.problem.final_solution_created?a.showRatingModal():(a.mainPage.selectedTab="my question",
a.hideDialog(),b.path("/"))},a.pusherExplanationUnbinding=function(){i.unbind("explanation"),i.unsubscribe("explanation",{id:a.problem.explanation.data.id})},a.pusherAskerUnbinding=function(){i.unbind("account")},a.resetChatError=function(){a.chat_error=""},a.enterSubmit=function(){a.postNewMessage()},a.showPreview=function(b){"image"==b.type?a.preview_url=k.trustAsResourceUrl(b.file_url):("excel"==b.type||"google"==b.type)&&(a.preview_url=k.trustAsResourceUrl("https://docs.google.com/spreadsheets/d/"+b.file_id+"?rand="+l()))},a.plural=function(a){return a>1?"stars":"star"},a.takeSurvey=function(){if(!a.input.rating)return void a.setChatError("Invalid data");a.resetChatError(),a.ratingExplanation=!0;var b=a.getToken();h.rateExplanation({explanation_id:a.problem.explanation.data.id,score:a.input.rating},b).then(function(b){n.track("Rating",{uid:Number(a.getAccountID()),qid:Number(a.problem.id),rate:Number(a.input.rating)}),console.log(b),a.problem.problem_state.state="Complete",a.hideDialog(),a.survey_url?(n.track("Take Survey",{uid:Number(a.getAccountID()),qid:Number(a.problem.id)}),m.location.href=a.survey_url):a.goToMain()},function(b){a.setChatError(b),a.ratingExplanation=!1,a.hideDialog()})},a.$on("$destroy",function(){console.log("ondestroy"),console.log("disconnect pusher"),a.pusherExplanationUnbinding(),a.pusherAskerUnbinding()}),a.init_chat()}]),angular.module("waoStudentApp").controller("BaseCtrl",["$scope","$rootScope","AccessToken","$location","$window","ConfigService","PusherService","deviceDetector","$mixpanel","ZendeskWidget",function(a,b,c,d,e,f,g,h,i,j){var k=null;a.is_logged_in=!1,a.input={},a.input.file=null,a.file_option={accept:".csv, .xls, .xlsx, .jpg, .png, .jpeg",max_size:20971520},a.excel_thumbnail="/images/cover-msexcel.41e07ce6.jpg",a.googlesheet_thumbnail="/images/cover-ggsheet.8c161406.jpg",a.image_mime_type=["image/jpeg","image/pjpeg","image/png"],a.excel_mime_type=["application/excel","application/vnd.ms-excel","application/x-excel","application/x-msexcel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","text/csv"],a.image_extensions=["jpg","jpeg","png"],a.excel_extensions=["xls","xlsx","csv"],a.spreadsheet_software_list=[{id:1,name:"Google Sheets"},{id:2,name:"Microsoft Excel 97-2004 (.xls)"},{id:3,name:"Microsoft Excel 2004+ (.xlsx)"}],a.categories=[{id:-10,name:"Fixing Formulas"},{id:-3,name:"Generating Charts"},{id:-1,name:"Pivot Tables"},{id:-2,name:"Formatting Cells"}],a.ratyOptions={cancel:!1,half:!1,halfShow:!0,path:"",starHalf:"images/star-half.735b95e8.png",starOff:"images/star-off.090541e6.png",starOn:"images/star-on.94fbd79b.png"},a.grade_list=[],a.survey_url=null,a.wao_available=null,a.config_data=null,a.mainPage={selectedTab:"live feed"},a.getToken=function(){var a=c.get();return a||b.logout(),a},a.getAccountID=function(){return c.getAccountId()},a.showLogoutConfirmModal=function(){var b=$modal.open({templateUrl:"logoutConfirmModal.html",scope:a,keyboard:!1,backdrop:"static"});a.showDialog(b)},a.validateFileAttachment=function(b){if(b){var c=a.file_option.max_size;if(b.size>c)return alert("Attachment size exceeds the allowable limit of 20MB."),void(a.input.file=null);var d=b.name.split(".").pop().toLowerCase(),e=["jpg","jpeg","png","xls","xlsx","csv"];-1===e.indexOf(d)&&(alert("Attachment has an invalid file extension. Only .jpg, .jpeg, .png, .xls, .xlsx, .csv files are allowed."),a.input.file=null)}},a.hideDialog=function(){k&&(k.dismiss("cancel"),k=null)},a.showDialog=function(b){a.hideDialog(),k=b},a.getDialog=function(){return k},b.logout=function(){g.unbindAll(),g.unsubscribeAll(),g.disconnect(),c.clear(),i.reset(),d.path("/login"),a.mainPage.selectedTab="live feed"},a.logout=function(){i.track("Logout",{uid:Number(a.getAccountID())}),b.logout()},a.getSpreadsheetSoftware=function(b){for(var c=a.spreadsheet_software_list.length,d=0;c>d;d++)if(a.spreadsheet_software_list[d].id==b)return a.spreadsheet_software_list[d].name;return""},a.downloadFile=function(a){e.open(a,"_blank")},a.removeAttachment=function(){a.input.file=null},a.init_base=function(){f.getConfigs().then(function(b){var c=b.data.data;a.config_data=c,a.grade_list=c.grade_list,c.wao_survey&&"on"==c.wao_survey.mode&&c.wao_survey.url&&(a.survey_url=c.wao_survey.url),a.wao_available=c.wao_available,console.log(c),a.getAccountID()&&i.identify(Number(a.getAccountID())),a.getToken()},function(a){})},a.isValidImageFile=function(){if(!a.input.file)return!1;var b=a.input.file.name.split(".").pop().toLowerCase();return-1!==a.image_extensions.indexOf(b)},a.isValidExcelFile=function(){if(!a.input.file)return!1;var b=a.input.file.name.split(".").pop().toLowerCase();return-1!==a.excel_extensions.indexOf(b)},a.forceLogOut=function(){a.is_logged_in=!1,alert("Your account was banned. Please contact with our support for more information"),a.logout()};var l=!1;b.$on("$routeChangeSuccess",function(a){console.log(d.url()),e.ga("send","pageview",d.url());var b=d.url();"/login"==b||"/"==b?(l||(j.show(),l=!0),"/"==b&&c.getAccountId()?j.identify({name:c.getNickname(),email:c.getEmail()}):"/login"==b&&e.$zopim&&!c.getAccountId()&&e.$zopim(function(){$zopim.livechat.clearAll()})):l&&(j.hide(),l=!1)}),a.getEducationLevel=function(b){for(var c=a.grade_list.length,d=0;c>d;d++)if(a.grade_list[d].id==b)return a.grade_list[d].name;return""},a.getCategory=function(b){for(var c=a.categories.length,d=0;c>d;d++)if(a.categories[d].id==b)return a.categories[d].name;return""},a.global_class=h.os+" "+h.browser,a.init_base()}]),angular.module("waoStudentApp").factory("Auth",["ENV","Facebook","$http","$q",function(a,b,c,d){return{loginFB:function(){var a=d.defer();return b.login(function(b){"connected"==b.status?a.resolve({access_token:b.authResponse.accessToken,user_id:b.authResponse.userID}):a.reject(b.message)},{scope:"public_profile,email"}),a.promise},connectFB:function(){var b=d.defer();return this.loginFB().then(function(d){console.log(d),void 0!==d.access_token&&c.post(a.endpoint+"/connect/asker/facebook",d,{headers:{Accept:"application/json","Content-Type":"application/json"}}).then(function(a){var c=a.data.data;b.resolve({access_token:c.access_token,account_id:c.account_id,nickname:c.nickname,grade_id:c.grade_id,is_signup:c.is_signup,account_type:"facebook",email:c.email?c.email:""})},function(a){console.log(a),b.reject(a)})},function(a){b.reject(a)}),b.promise},loginByEmail:function(b,e){var f=d.defer();return c.post(a.endpoint+"/log-in/asker/email",{email:b,password:e},{headers:{Accept:"application/json","Content-Type":"application/json"}}).then(function(a){var b=a.data.data;f.resolve({access_token:b.access_token,account_id:b.account_id,nickname:b.nickname,grade_id:b.grade_id,account_type:"email",email:b.email?b.email:""})},function(a){console.log(a),f.reject(a)}),f.promise},signUpByEmail:function(b,e,f,g){var h=d.defer();return c.post(a.endpoint+"/sign-up/asker/email",{email:b,password:e,nickname:f,grade_id:g},{headers:{Accept:"application/json","Content-Type":"application/json"}}).then(function(a){var b=a.data.data;h.resolve({access_token:b.access_token,account_id:b.account_id,nickname:b.nickname,grade_id:b.grade_id,account_type:"email",email:b.email?b.email:""})},function(a){console.log(a),h.reject(a)}),h.promise}}}]),angular.module("waoStudentApp").factory("AccessToken",["localStorageService",function(a){var b="accesstoken",c=function(a){return a&&a.access_token&&a.account_id};return{set:function(d){return c(d)?(a.set(b,JSON.stringify(d)),!0):!1},getFromLocalStorage:function(){var d=null;try{d=JSON.parse(a.get(b))}catch(e){return null}return c(d)?d:(a.set(b,null),null)},get:function(){var a=this.getFromLocalStorage();return null!==a&&void 0!==a.access_token?a.access_token:null},getAccountId:function(){var a=this.getFromLocalStorage();return a&&a.account_id},getNickname:function(){var a=this.getFromLocalStorage();return a&&a.nickname},setInfo:function(c,d){var e=this.getFromLocalStorage();e&&(e.nickname=c,e.grade_id=d,a.set(b,JSON.stringify(e)))},getLoginType:function(){var a=this.getFromLocalStorage();return a&&a.account_type},getAccountType:function(){return"asker"},getEmail:function(){var a=this.getFromLocalStorage();return a&&a.email},clear:function(){a.set(b,null)}}}]),angular.module("waoStudentApp").factory("FileUpload",["ENV","$http","Upload",function(a,b,c){return{uploadFile:function(c){return b.post(a.endpoint+"/askers/me/upload_urls",{},{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+c}})},uploadExcelFile:function(c){return b.post(a.endpoint+"/upload_urls/google_drive",{},{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+c}})},uploadFileToGAE:function(a,b){return c.upload({url:b,data:{file:a}})},uploadSharedUrl:function(c,d){return b.post(a.endpoint+"/uploads/google_drive/urls",{file_url:d},{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+c}})}}}]),angular.module("waoStudentApp").factory("Profile",["ENV","$http",function(a,b){var c=function(a){return{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+a}}};return{newInfo:function(d,e,f){return b.post(a.endpoint+"/askers/me/info",{nickname:e,grade_id:f},c(d))},changePassword:function(d,e,f){return b.put(a.endpoint+"/askers/me/password",{current_password:e,new_password:f},c(d))},updateInfo:function(d,e){return b.put(a.endpoint+"/askers/me/info",{grade_id:e},c(d))},getInfo:function(d){return b.get(a.endpoint+"/askers/me",c(d))}}}]),angular.module("waoStudentApp").factory("Explanation",["ENV","$http",function(a,b){return{postMessage:function(c,d){return b.post(a.endpoint+"/askers/me/explanation_messages",c,{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+d}})},rateExplanation:function(c,d){return b.post(a.endpoint+"/askers/me/ratings",c,{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+d}})},endChatSession:function(c,d){return b.post(a.endpoint+"/askers/me/chat_session/end",c,{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+d}})}}}]),angular.module("waoStudentApp").factory("Problem",["ENV","$http",function(a,b){var c=6,d=function(a){return{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+a}};return{getProblemHistory:function(c,e){return b.get(a.endpoint+"/askers/me/problems",{params:{page:e},headers:d(c)})},getProblemLiveFeed:function(c,e){return b.get(a.endpoint+"/askers/livefeed",{params:{page:e},headers:d(c)})},postProblem:function(e,f){return e.subject_id=c,b.post(a.endpoint+"/askers/me/problems",e,{headers:d(f)})},getProblem:function(c,e){return b.get(a.endpoint+"/askers/me/problems/"+e,{params:{v:(new Date).getTime()},headers:d(c)})},postError:function(c,e){return b.post(a.endpoint+"/errors",{name:e},{headers:d(c)})}}}]),angular.module("waoStudentApp").factory("PusherService",["ENV","$pusher",function(a,b){var c=null,d=null,e=null,f=null;return{connect:function(d){if(null===c){var e=new Pusher(a.pusher_key,{authEndpoint:a.endpoint+"/askers/me/pusher/auth",auth:{headers:{Authorization:"Bearer "+d}}});c=b(e)}},disconnect:function(){c&&(c=null,d=null,e=null,f=null)},subscribe:function(b,g){console.log("subscribe"),console.log(g),console.log(a.pusher_channel_namespace);var h="";return c?"account"==b&&null===d?(h=["presence",g.accountType,g.accountId,a.pusher_channel_namespace].join("-"),d=c.subscribe(h),d.wao_channel_name=h,!0):"explanation"==b&&null===e?(h=["presence","explanation",g.id,a.pusher_channel_namespace].join("-"),e=c.subscribe(h),e.wao_channel_name=h,!0):"puclic_message"==b&&null===f?(h=["public","asker",a.pusher_channel_namespace].join("-"),f=c.subscribe(h),f.wao_channel_name=h,!0):!1:(console.log("Pusher is disconnected"),!1)},unsubscribe:function(a,b){return c?void("account"==a&&null!==d?(c.unsubscribe(d.wao_channel_name),d=null):"explanation"==a&&null!==e?(c.unsubscribe(e.wao_channel_name),e=null):"puclic_message"==a&&null!==f&&(c.unsubscribe(f.wao_channel_name),f=null)):void console.log("Pusher is disconnected")},bind:function(a,b,c){"account"==a&&null!==d&&d.bind(b,c),"explanation"==a&&null!==e&&e.bind(b,c),"puclic_message"==a&&null!==f&&f.bind(b,c)},unbind:function(a,b,c){"account"==a&&null!==d&&(c?d.unbind(b,c):b?d.unbind(b):d.unbind()),"explanation"==a&&null!==e&&(c?e.unbind(b,c):b?e.unbind(b):e.unbind()),"puclic_message"==a&&null!==f&&(c?f.unbind(b,c):b?f.unbind(b):f.unbind())},unsubscribeAll:function(){c&&(d&&(c.unsubscribe(d.wao_channel_name),d=null),e&&(c.unsubscribe(e.wao_channel_name),e=null),f&&(c.unsubscribe(f.wao_channel_name),f=null))},unbindAll:function(){c&&(d&&d.unbind(),e&&e.unbind(),f&&f.unbind())}}}]),angular.module("waoStudentApp").factory("State",["ENV","$http",function(a,b){return{getAskerState:function(c){return b.get(a.endpoint+"/askers/me/states",{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+c}})},getExpertAvailability:function(c){return b.get(a.endpoint+"/wao/explainers/availability",{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+c}})},checkAvailability:function(c){return b.get(a.endpoint+"/explainers/availability",{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+c}})}}}]),angular.module("waoStudentApp").factory("ConfigService",["ENV","$http",function(a,b){var c=function(a){return{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+a}}};return{getConfigs:function(){return b.get(a.endpoint+"/configs/asker")},getSpreadsheetTopics:function(d){return b.get(a.endpoint+"/topics",c(d))}}}]),angular.module("waoStudentApp").factory("GoogleAdWords",["$window","ENV",function(a,b){var c={"Visit Landing Page":b.google_visit_landing_page_conversion_label},d=function(d){a.google_trackConversion({google_conversion_id:b.google_conversion_id,google_conversion_language:"en",google_conversion_format:"3",google_conversion_color:"ffffff",google_conversion_label:c[d],google_remarketing_only:!1})};return{sendVisitLandingPageConversion:function(){console.log("send Visit Landing Page conversion"),d("Visit Landing Page")}}}]),angular.module("waoStudentApp").directive("enterSubmit",function(){return function(a,b,c){b.bind("keydown keypress",function(b){13===b.which&&(a.enterSubmit(),b.preventDefault())})}}),angular.module("waoStudentApp").directive("ngRaty",function(){return{restrict:"A",scope:{ngRaty:"=",ngModel:"=",mouseOver:"&",mouseOut:"&"},link:function(a,b,c){function d(b){var c=a.$root.$$phase;"$apply"==c||"$digest"==c?b&&"function"==typeof b&&b():a.$apply(b)}function e(){f.raty("destroy")}var f=$(b),g=a.ngModel,h={score:parseFloat(g,10),click:function(b,c){c.stopPropagation(),b||(b=0),d(function(){a.ngModel=parseFloat(b)})},mouseover:function(b,c){a.mouseOver&&d(function(){a.mouseOver({stars:b,e:c})})},mouseout:function(b,c){a.mouseOut&&d(function(){a.mouseOut({stars:b,e:c})})}},i=angular.extend(h,a.ngRaty||{});f.raty(i),a.$watch("ngModel",function(b,c){f.raty("score",a.ngModel)}),f.bind("$destroy",e)}}}),angular.module("waoStudentApp").filter("htmlsafe",["$sce",function(a){return function(b){return a.trustAsHtml(b)}}]),angular.module("waoStudentApp").provider("$mixpanel",function(){function a(){if(!Object.prototype.hasOwnProperty.call(window,"mixpanel"))throw"Global `mixpanel` not available. Did you forget to include the library on the page?";mixpanel.init(d),b(function(){e&&mixpanel.register(e)})}function b(a){Object.prototype.hasOwnProperty.call(window,"mixpanel")&&void 0!==window.mixpanel.__loaded||setTimeout(function(){b(a)},500),a()}function c(a){return function(){var b,c,d=window.mixpanel,e=a.split(".");for(c=0;c<e.length;c++)b=d,d=d[e[c]];return d.apply(b,arguments)}}var d,e;this.apiKey=function(a){return a?void(d=a):d},this.superProperties=function(a){return a?void(e=a):e},this.$get=function(){return a(),{init:c("init"),push:c("push"),disable:c("disable"),track:c("track"),track_links:c("track_links"),track_forms:c("track_forms"),register:c("register"),register_once:c("register_once"),unregister:c("unregister"),identify:c("identify"),get_distinct_id:c("get_distinct_id"),alias:c("alias"),set_config:c("set_config"),get_config:c("get_config"),get_property:c("get_property"),reset:c("reset"),people:{set:c("people.set"),set_once:c("people.set_once"),increment:c("people.increment"),append:c("people.append"),track_charge:c("people.track_charge"),clear_charges:c("people.clear_charges"),delete_user:c("people.delete_user")}}}}),angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.modal"]),angular.module("ui.bootstrap.tpls",["uib/template/modal/window.html"]),angular.module("ui.bootstrap.position",[]).factory("$uibPosition",["$document","$window",function(a,b){var c,d,e={normal:/(auto|scroll)/,hidden:/(auto|scroll|hidden)/},f={auto:/\s?auto?\s?/i,primary:/^(top|bottom|left|right)$/,secondary:/^(top|bottom|left|right|center)$/,vertical:/^(top|bottom)$/},g=/(HTML|BODY)/;return{getRawNode:function(a){return a.nodeName?a:a[0]||a},parseStyle:function(a){return a=parseFloat(a),isFinite(a)?a:0},offsetParent:function(c){function d(a){return"static"===(b.getComputedStyle(a).position||"static")}c=this.getRawNode(c);for(var e=c.offsetParent||a[0].documentElement;e&&e!==a[0].documentElement&&d(e);)e=e.offsetParent;return e||a[0].documentElement},scrollbarWidth:function(e){if(e){if(angular.isUndefined(d)){var f=a.find("body");f.addClass("uib-position-body-scrollbar-measure"),d=b.innerWidth-f[0].clientWidth,d=isFinite(d)?d:0,f.removeClass("uib-position-body-scrollbar-measure")}return d}if(angular.isUndefined(c)){var g=angular.element('<div class="uib-position-scrollbar-measure"></div>');a.find("body").append(g),c=g[0].offsetWidth-g[0].clientWidth,c=isFinite(c)?c:0,g.remove()}return c},scrollbarPadding:function(a){a=this.getRawNode(a);var c=b.getComputedStyle(a),d=this.parseStyle(c.paddingRight),e=this.parseStyle(c.paddingBottom),f=this.scrollParent(a,!1,!0),h=this.scrollbarWidth(g.test(f.tagName));return{scrollbarWidth:h,widthOverflow:f.scrollWidth>f.clientWidth,right:d+h,originalRight:d,heightOverflow:f.scrollHeight>f.clientHeight,bottom:e+h,originalBottom:e}},isScrollable:function(a,c){a=this.getRawNode(a);var d=c?e.hidden:e.normal,f=b.getComputedStyle(a);return d.test(f.overflow+f.overflowY+f.overflowX)},scrollParent:function(c,d,f){c=this.getRawNode(c);var g=d?e.hidden:e.normal,h=a[0].documentElement,i=b.getComputedStyle(c);if(f&&g.test(i.overflow+i.overflowY+i.overflowX))return c;var j="absolute"===i.position,k=c.parentElement||h;if(k===h||"fixed"===i.position)return h;for(;k.parentElement&&k!==h;){var l=b.getComputedStyle(k);if(j&&"static"!==l.position&&(j=!1),!j&&g.test(l.overflow+l.overflowY+l.overflowX))break;k=k.parentElement}return k},position:function(c,d){c=this.getRawNode(c);var e=this.offset(c);if(d){var f=b.getComputedStyle(c);e.top-=this.parseStyle(f.marginTop),e.left-=this.parseStyle(f.marginLeft)}var g=this.offsetParent(c),h={top:0,left:0};return g!==a[0].documentElement&&(h=this.offset(g),h.top+=g.clientTop-g.scrollTop,h.left+=g.clientLeft-g.scrollLeft),{width:Math.round(angular.isNumber(e.width)?e.width:c.offsetWidth),height:Math.round(angular.isNumber(e.height)?e.height:c.offsetHeight),top:Math.round(e.top-h.top),left:Math.round(e.left-h.left)}},offset:function(c){c=this.getRawNode(c);var d=c.getBoundingClientRect();return{width:Math.round(angular.isNumber(d.width)?d.width:c.offsetWidth),height:Math.round(angular.isNumber(d.height)?d.height:c.offsetHeight),top:Math.round(d.top+(b.pageYOffset||a[0].documentElement.scrollTop)),left:Math.round(d.left+(b.pageXOffset||a[0].documentElement.scrollLeft))}},viewportOffset:function(c,d,e){c=this.getRawNode(c),e=e!==!1?!0:!1;var f=c.getBoundingClientRect(),g={top:0,left:0,bottom:0,right:0},h=d?a[0].documentElement:this.scrollParent(c),i=h.getBoundingClientRect();if(g.top=i.top+h.clientTop,g.left=i.left+h.clientLeft,h===a[0].documentElement&&(g.top+=b.pageYOffset,g.left+=b.pageXOffset),g.bottom=g.top+h.clientHeight,g.right=g.left+h.clientWidth,e){var j=b.getComputedStyle(h);g.top+=this.parseStyle(j.paddingTop),g.bottom-=this.parseStyle(j.paddingBottom),g.left+=this.parseStyle(j.paddingLeft),g.right-=this.parseStyle(j.paddingRight)}return{top:Math.round(f.top-g.top),bottom:Math.round(g.bottom-f.bottom),left:Math.round(f.left-g.left),right:Math.round(g.right-f.right)}},parsePlacement:function(a){var b=f.auto.test(a);return b&&(a=a.replace(f.auto,"")),a=a.split("-"),a[0]=a[0]||"top",f.primary.test(a[0])||(a[0]="top"),a[1]=a[1]||"center",f.secondary.test(a[1])||(a[1]="center"),b?a[2]=!0:a[2]=!1,a},positionElements:function(a,c,d,e){a=this.getRawNode(a),c=this.getRawNode(c);var g=angular.isDefined(c.offsetWidth)?c.offsetWidth:c.prop("offsetWidth"),h=angular.isDefined(c.offsetHeight)?c.offsetHeight:c.prop("offsetHeight");d=this.parsePlacement(d);var i=e?this.offset(a):this.position(a),j={top:0,left:0,placement:""};if(d[2]){var k=this.viewportOffset(a,e),l=b.getComputedStyle(c),m={width:g+Math.round(Math.abs(this.parseStyle(l.marginLeft)+this.parseStyle(l.marginRight))),height:h+Math.round(Math.abs(this.parseStyle(l.marginTop)+this.parseStyle(l.marginBottom)))};if(d[0]="top"===d[0]&&m.height>k.top&&m.height<=k.bottom?"bottom":"bottom"===d[0]&&m.height>k.bottom&&m.height<=k.top?"top":"left"===d[0]&&m.width>k.left&&m.width<=k.right?"right":"right"===d[0]&&m.width>k.right&&m.width<=k.left?"left":d[0],d[1]="top"===d[1]&&m.height-i.height>k.bottom&&m.height-i.height<=k.top?"bottom":"bottom"===d[1]&&m.height-i.height>k.top&&m.height-i.height<=k.bottom?"top":"left"===d[1]&&m.width-i.width>k.right&&m.width-i.width<=k.left?"right":"right"===d[1]&&m.width-i.width>k.left&&m.width-i.width<=k.right?"left":d[1],"center"===d[1])if(f.vertical.test(d[0])){var n=i.width/2-g/2;k.left+n<0&&m.width-i.width<=k.right?d[1]="left":k.right+n<0&&m.width-i.width<=k.left&&(d[1]="right")}else{var o=i.height/2-m.height/2;k.top+o<0&&m.height-i.height<=k.bottom?d[1]="top":k.bottom+o<0&&m.height-i.height<=k.top&&(d[1]="bottom")}}switch(d[0]){case"top":j.top=i.top-h;break;case"bottom":j.top=i.top+i.height;break;case"left":j.left=i.left-g;break;case"right":j.left=i.left+i.width}switch(d[1]){case"top":j.top=i.top;break;case"bottom":j.top=i.top+i.height-h;break;case"left":j.left=i.left;break;case"right":j.left=i.left+i.width-g;break;case"center":f.vertical.test(d[0])?j.left=i.left+i.width/2-g/2:j.top=i.top+i.height/2-h/2}return j.top=Math.round(j.top),j.left=Math.round(j.left),j.placement="center"===d[1]?d[0]:d[0]+"-"+d[1],j},adjustTop:function(a,b,c,d){return-1!==a.indexOf("top")&&c!==d?{top:b.top-d+"px"}:void 0},positionArrow:function(a,c){a=this.getRawNode(a);var d=a.querySelector(".tooltip-inner, .popover-inner");if(d){var e=angular.element(d).hasClass("tooltip-inner"),g=e?a.querySelector(".tooltip-arrow"):a.querySelector(".arrow");if(g){var h={top:"",bottom:"",left:"",right:""};if(c=this.parsePlacement(c),"center"===c[1])return void angular.element(g).css(h);var i="border-"+c[0]+"-width",j=b.getComputedStyle(g)[i],k="border-";k+=f.vertical.test(c[0])?c[0]+"-"+c[1]:c[1]+"-"+c[0],k+="-radius";var l=b.getComputedStyle(e?d:a)[k];switch(c[0]){case"top":h.bottom=e?"0":"-"+j;break;case"bottom":h.top=e?"0":"-"+j;break;case"left":h.right=e?"0":"-"+j;break;case"right":h.left=e?"0":"-"+j}h[c[1]]=l,angular.element(g).css(h)}}}}}]),angular.module("ui.bootstrap.stackedMap",[]).factory("$$stackedMap",function(){return{createNew:function(){var a=[];return{add:function(b,c){a.push({key:b,value:c})},get:function(b){for(var c=0;c<a.length;c++)if(b===a[c].key)return a[c]},keys:function(){for(var b=[],c=0;c<a.length;c++)b.push(a[c].key);return b},top:function(){return a[a.length-1]},remove:function(b){for(var c=-1,d=0;d<a.length;d++)if(b===a[d].key){c=d;break}return a.splice(c,1)[0]},removeTop:function(){return a.pop()},length:function(){return a.length}}}}}),angular.module("ui.bootstrap.modal",["ui.bootstrap.stackedMap","ui.bootstrap.position"]).factory("$$multiMap",function(){return{createNew:function(){var a={};return{entries:function(){return Object.keys(a).map(function(b){return{key:b,value:a[b]}})},get:function(b){return a[b]},hasKey:function(b){return!!a[b]},keys:function(){return Object.keys(a)},put:function(b,c){a[b]||(a[b]=[]),a[b].push(c)},remove:function(b,c){var d=a[b];if(d){var e=d.indexOf(c);-1!==e&&d.splice(e,1),d.length||delete a[b]}}}}}}).provider("$uibResolve",function(){var a=this;this.resolver=null,this.setResolver=function(a){this.resolver=a},this.$get=["$injector","$q",function(b,c){var d=a.resolver?b.get(a.resolver):null;return{resolve:function(a,e,f,g){if(d)return d.resolve(a,e,f,g);var h=[];return angular.forEach(a,function(a){angular.isFunction(a)||angular.isArray(a)?h.push(c.resolve(b.invoke(a))):angular.isString(a)?h.push(c.resolve(b.get(a))):h.push(c.resolve(a))}),c.all(h).then(function(b){var c={},d=0;return angular.forEach(a,function(a,e){c[e]=b[d++]}),c})}}}]}).directive("uibModalBackdrop",["$animate","$injector","$uibModalStack",function(a,b,c){function d(b,d,e){e.modalInClass&&(a.addClass(d,e.modalInClass),b.$on(c.NOW_CLOSING_EVENT,function(c,f){var g=f();b.modalOptions.animation?a.removeClass(d,e.modalInClass).then(g):g()}))}return{restrict:"A",compile:function(a,b){return a.addClass(b.backdropClass),d}}}]).directive("uibModalWindow",["$uibModalStack","$q","$animateCss","$document",function(a,b,c,d){return{scope:{index:"@"},restrict:"A",transclude:!0,templateUrl:function(a,b){return b.templateUrl||"uib/template/modal/window.html"},link:function(e,f,g){f.addClass(g.windowTopClass||""),e.size=g.size,e.close=function(b){var c=a.getTop();c&&c.value.backdrop&&"static"!==c.value.backdrop&&b.target===b.currentTarget&&(b.preventDefault(),b.stopPropagation(),a.dismiss(c.key,"backdrop click"))},f.on("click",e.close),e.$isRendered=!0;var h=b.defer();e.$$postDigest(function(){h.resolve()}),h.promise.then(function(){var h=null;g.modalInClass&&(h=c(f,{addClass:g.modalInClass}).start(),e.$on(a.NOW_CLOSING_EVENT,function(a,b){var d=b();c(f,{removeClass:g.modalInClass}).start().then(d)})),b.when(h).then(function(){var b=a.getTop();if(b&&a.modalRendered(b.key),!d[0].activeElement||!f[0].contains(d[0].activeElement)){var c=f[0].querySelector("[autofocus]");c?c.focus():f[0].focus()}})})}}}]).directive("uibModalAnimationClass",function(){return{compile:function(a,b){b.modalAnimation&&a.addClass(b.uibModalAnimationClass)}}}).directive("uibModalTransclude",["$animate",function(a){return{link:function(b,c,d,e,f){f(b.$parent,function(b){c.empty(),a.enter(b,c)})}}}]).factory("$uibModalStack",["$animate","$animateCss","$document","$compile","$rootScope","$q","$$multiMap","$$stackedMap","$uibPosition",function(a,b,c,d,e,f,g,h,i){function j(a){var b="-";return a.replace(E,function(a,c){return(c?b:"")+a.toLowerCase()})}function k(a){return!!(a.offsetWidth||a.offsetHeight||a.getClientRects().length)}function l(){for(var a=-1,b=x.keys(),c=0;c<b.length;c++)x.get(b[c]).value.backdrop&&(a=c);return a>-1&&A>a&&(a=A),a}function m(a,b){var c=x.get(a).value,d=c.appendTo;x.remove(a),B=x.top(),B&&(A=parseInt(B.value.modalDomEl.attr("index"),10)),p(c.modalDomEl,c.modalScope,function(){var b=c.openedClass||w;y.remove(b,a);var e=y.hasKey(b);d.toggleClass(b,e),!e&&v&&v.heightOverflow&&v.scrollbarWidth&&(v.originalRight?d.css({paddingRight:v.originalRight+"px"}):d.css({paddingRight:""}),v=null),n(!0)},c.closedDeferred),o(),b&&b.focus?b.focus():d.focus&&d.focus()}function n(a){var b;x.length()>0&&(b=x.top().value,b.modalDomEl.toggleClass(b.windowTopClass||"",a))}function o(){if(t&&-1===l()){var a=u;p(t,u,function(){a=null}),t=void 0,u=void 0}}function p(b,c,d,e){function g(){g.done||(g.done=!0,a.leave(b).then(function(){d&&d(),b.remove(),e&&e.resolve()}),c.$destroy())}var h,i=null,j=function(){return h||(h=f.defer(),i=h.promise),function(){h.resolve()}};return c.$broadcast(z.NOW_CLOSING_EVENT,j),f.when(i).then(g)}function q(a){if(a.isDefaultPrevented())return a;var b=x.top();if(b)switch(a.which){case 27:b.value.keyboard&&(a.preventDefault(),e.$apply(function(){z.dismiss(b.key,"escape key press")}));break;case 9:var c=z.loadFocusElementList(b),d=!1;a.shiftKey?(z.isFocusInFirstItem(a,c)||z.isModalFocused(a,b))&&(d=z.focusLastFocusableElement(c)):z.isFocusInLastItem(a,c)&&(d=z.focusFirstFocusableElement(c)),d&&(a.preventDefault(),a.stopPropagation())}}function r(a,b,c){return!a.value.modalScope.$broadcast("modal.closing",b,c).defaultPrevented}function s(){Array.prototype.forEach.call(document.querySelectorAll("["+C+"]"),function(a){var b=parseInt(a.getAttribute(C),10),c=b-1;a.setAttribute(C,c),c||(a.removeAttribute(C),a.removeAttribute("aria-hidden"))})}var t,u,v,w="modal-open",x=h.createNew(),y=g.createNew(),z={NOW_CLOSING_EVENT:"modal.stack.now-closing"},A=0,B=null,C="data-bootstrap-modal-aria-hidden-count",D="a[href], area[href], input:not([disabled]):not([tabindex='-1']), button:not([disabled]):not([tabindex='-1']),select:not([disabled]):not([tabindex='-1']), textarea:not([disabled]):not([tabindex='-1']), iframe, object, embed, *[tabindex]:not([tabindex='-1']), *[contenteditable=true]",E=/[A-Z]/g;return e.$watch(l,function(a){u&&(u.index=a)}),c.on("keydown",q),e.$on("$destroy",function(){c.off("keydown",q)}),z.open=function(b,f){function g(a){function b(a){var b=a.parent()?a.parent().children():[];return Array.prototype.filter.call(b,function(b){return b!==a[0]})}if(a&&"BODY"!==a[0].tagName)return b(a).forEach(function(a){var b="true"===a.getAttribute("aria-hidden"),c=parseInt(a.getAttribute(C),10);c||(c=b?1:0),a.setAttribute(C,c+1),a.setAttribute("aria-hidden","true")}),g(a.parent())}var h=c[0].activeElement,k=f.openedClass||w;n(!1),B=x.top(),x.add(b,{deferred:f.deferred,renderDeferred:f.renderDeferred,closedDeferred:f.closedDeferred,modalScope:f.scope,backdrop:f.backdrop,keyboard:f.keyboard,openedClass:f.openedClass,windowTopClass:f.windowTopClass,animation:f.animation,appendTo:f.appendTo}),y.put(k,b);var m=f.appendTo,o=l();if(!m.length)throw new Error("appendTo element not found. Make sure that the element passed is in DOM.");o>=0&&!t&&(u=e.$new(!0),u.modalOptions=f,u.index=o,t=angular.element('<div uib-modal-backdrop="modal-backdrop"></div>'),t.attr({"class":"modal-backdrop","ng-style":"{'z-index': 1040 + (index && 1 || 0) + index*10}","uib-modal-animation-class":"fade","modal-in-class":"in"}),f.backdropClass&&t.addClass(f.backdropClass),f.animation&&t.attr("modal-animation","true"),d(t)(u),a.enter(t,m),i.isScrollable(m)&&(v=i.scrollbarPadding(m),v.heightOverflow&&v.scrollbarWidth&&m.css({paddingRight:v.right+"px"})));var p;f.component?(p=document.createElement(j(f.component.name)),p=angular.element(p),p.attr({resolve:"$resolve","modal-instance":"$uibModalInstance",close:"$close($value)",dismiss:"$dismiss($value)"})):p=f.content,A=B?parseInt(B.value.modalDomEl.attr("index"),10)+1:0;var q=angular.element('<div uib-modal-window="modal-window"></div>');q.attr({"class":"modal","template-url":f.windowTemplateUrl,"window-top-class":f.windowTopClass,role:"dialog","aria-labelledby":f.ariaLabelledBy,"aria-describedby":f.ariaDescribedBy,size:f.size,index:A,animate:"animate","ng-style":"{'z-index': 1050 + $$topModalIndex*10, display: 'block'}",tabindex:-1,"uib-modal-animation-class":"fade","modal-in-class":"in"}).append(p),f.windowClass&&q.addClass(f.windowClass),f.animation&&q.attr("modal-animation","true"),m.addClass(k),f.scope&&(f.scope.$$topModalIndex=A),a.enter(d(q)(f.scope),m),x.top().value.modalDomEl=q,x.top().value.modalOpener=h,g(q)},z.close=function(a,b){var c=x.get(a);return s(),c&&r(c,b,!0)?(c.value.modalScope.$$uibDestructionScheduled=!0,c.value.deferred.resolve(b),m(a,c.value.modalOpener),!0):!c},z.dismiss=function(a,b){var c=x.get(a);return s(),c&&r(c,b,!1)?(c.value.modalScope.$$uibDestructionScheduled=!0,c.value.deferred.reject(b),m(a,c.value.modalOpener),!0):!c},z.dismissAll=function(a){for(var b=this.getTop();b&&this.dismiss(b.key,a);)b=this.getTop();
},z.getTop=function(){return x.top()},z.modalRendered=function(a){var b=x.get(a);z.focusFirstFocusableElement(z.loadFocusElementList(b)),b&&b.value.renderDeferred.resolve()},z.focusFirstFocusableElement=function(a){return a.length>0?(a[0].focus(),!0):!1},z.focusLastFocusableElement=function(a){return a.length>0?(a[a.length-1].focus(),!0):!1},z.isModalFocused=function(a,b){if(a&&b){var c=b.value.modalDomEl;if(c&&c.length)return(a.target||a.srcElement)===c[0]}return!1},z.isFocusInFirstItem=function(a,b){return b.length>0?(a.target||a.srcElement)===b[0]:!1},z.isFocusInLastItem=function(a,b){return b.length>0?(a.target||a.srcElement)===b[b.length-1]:!1},z.loadFocusElementList=function(a){if(a){var b=a.value.modalDomEl;if(b&&b.length){var c=b[0].querySelectorAll(D);return c?Array.prototype.filter.call(c,function(a){return k(a)}):c}}},z}]).provider("$uibModal",function(){var a={options:{animation:!0,backdrop:!0,keyboard:!0},$get:["$rootScope","$q","$document","$templateRequest","$controller","$uibResolve","$uibModalStack",function(b,c,d,e,f,g,h){function i(a){return a.template?c.when(a.template):e(angular.isFunction(a.templateUrl)?a.templateUrl():a.templateUrl)}var j={},k=null;return j.getPromiseChain=function(){return k},j.open=function(e){function j(){return q}var l=c.defer(),m=c.defer(),n=c.defer(),o=c.defer(),p={result:l.promise,opened:m.promise,closed:n.promise,rendered:o.promise,close:function(a){return h.close(p,a)},dismiss:function(a){return h.dismiss(p,a)}};if(e=angular.extend({},a.options,e),e.resolve=e.resolve||{},e.appendTo=e.appendTo||d.find("body").eq(0),!e.component&&!e.template&&!e.templateUrl)throw new Error("One of component or template or templateUrl options is required.");var q;q=e.component?c.when(g.resolve(e.resolve,{},null,null)):c.all([i(e),g.resolve(e.resolve,{},null,null)]);var r;return r=k=c.all([k]).then(j,j).then(function(a){function c(b,c,d,e){b.$scope=g,b.$scope.$resolve={},d?b.$scope.$uibModalInstance=p:b.$uibModalInstance=p;var f=c?a[1]:a;angular.forEach(f,function(a,c){e&&(b[c]=a),b.$scope.$resolve[c]=a})}var d=e.scope||b,g=d.$new();g.$close=p.close,g.$dismiss=p.dismiss,g.$on("$destroy",function(){g.$$uibDestructionScheduled||g.$dismiss("$uibUnscheduledDestruction")});var i,j,k={scope:g,deferred:l,renderDeferred:o,closedDeferred:n,animation:e.animation,backdrop:e.backdrop,keyboard:e.keyboard,backdropClass:e.backdropClass,windowTopClass:e.windowTopClass,windowClass:e.windowClass,windowTemplateUrl:e.windowTemplateUrl,ariaLabelledBy:e.ariaLabelledBy,ariaDescribedBy:e.ariaDescribedBy,size:e.size,openedClass:e.openedClass,appendTo:e.appendTo},q={},r={};e.component?(c(q,!1,!0,!1),q.name=e.component,k.component=q):e.controller&&(c(r,!0,!1,!0),j=f(e.controller,r,!0,e.controllerAs),e.controllerAs&&e.bindToController&&(i=j.instance,i.$close=g.$close,i.$dismiss=g.$dismiss,angular.extend(i,{$resolve:r.$scope.$resolve},d)),i=j(),angular.isFunction(i.$onInit)&&i.$onInit()),e.component||(k.content=a[0]),h.open(p,k),m.resolve(!0)},function(a){m.reject(a),l.reject(a)})["finally"](function(){k===r&&(k=null)}),p},j}]};return a}),angular.module("uib/template/modal/window.html",[]).run(["$templateCache",function(a){a.put("uib/template/modal/window.html","<div class=\"modal-dialog {{size ? 'modal-' + size : ''}}\"><div class=\"modal-content\" uib-modal-transclude></div></div>\n")}]),angular.module("waoStudentApp").constant("LIVE_FEED_DATA",[{id:1,asker_id:0,file_thumbnail_url:"https://storage.googleapis.com/wao-production.appspot.com/live_feed_samples/image00.png",spreadsheet_software:1,text:"Conditional formatting isn’t working right. It’s suppose to highlight the cells green but will only highlight them red. Help!",spreadsheet_topic:{name:"Conditional Formatting, Greater than"}},{id:2,asker_id:0,file_thumbnail_url:"https://storage.googleapis.com/wao-production.appspot.com/live_feed_samples/image01.png",spreadsheet_software:1,text:"This pivot table is so confusing!  I want to count the # of people in each grade but I want to ignore certain people that are over 25 years of age.",spreadsheet_topic:{name:"Pivot Table, Filters"}},{id:3,asker_id:0,file_thumbnail_url:"https://storage.googleapis.com/wao-production.appspot.com/live_feed_samples/image02.png",spreadsheet_software:1,text:"I need a formula to count how many hours each of my customer support team agents work in a weekly schedule.  I keep getting an error!",spreadsheet_topic:{name:"CountIf, #N/A, Sum"}},{id:4,asker_id:0,file_thumbnail_url:"https://storage.googleapis.com/wao-production.appspot.com/live_feed_samples/image03.png",spreadsheet_software:1,text:"My chart says 100,000% on the axis and that’s not even a number in the spreadsheet. I need the axis to reflect the actual numbers I’m entering.",spreadsheet_topic:{name:"Cell Formatting, Line Graph, Data Range, Chart"}},{id:5,asker_id:0,file_thumbnail_url:"https://storage.googleapis.com/wao-production.appspot.com/live_feed_samples/image04.png",spreadsheet_software:1,text:"I have an issue with my chart.  The legend says “Series1, Series2 and Series3”.  I need them to read the appropriate year.",spreadsheet_topic:{name:"#REF, Chart, X-Axis, Bar Graph"}},{id:6,asker_id:0,file_thumbnail_url:"https://storage.googleapis.com/wao-production.appspot.com/live_feed_samples/image05.png",spreadsheet_software:1,text:"I need to count how many instances there are of cells over 90%, 85-90%, 80-85% and less than 80%.  I keep getting #N/A instead of a count.",spreadsheet_topic:{name:"CountIf, Sum, #N/A, Formula"}},{id:7,asker_id:0,file_thumbnail_url:"https://storage.googleapis.com/wao-production.appspot.com/live_feed_samples/image06.png",spreadsheet_software:1,text:"I need my graph to ignore cells that read “0”.  Currently it is including cells that have 0 as their value and we don’t need that in our graph.",spreadsheet_topic:{name:"Data Range, Cell Formatting, Chart, Line Graph"}},{id:8,asker_id:0,file_thumbnail_url:"https://storage.googleapis.com/wao-production.appspot.com/live_feed_samples/image07.png",spreadsheet_software:1,text:"I’m so confused! I’m trying to use vlookup to bring over the correct Time Stamp for new CSID.  I just need the data from column B to go to column D.",spreadsheet_topic:{name:"Vlookup, Data Range, #REF"}},{id:9,asker_id:0,file_thumbnail_url:"https://storage.googleapis.com/wao-production.appspot.com/live_feed_samples/image08.png",spreadsheet_software:1,text:"My formula isn’t working! I need column H to tell me which row has the most fruit. For example, G2 should read Pineapples and G3 should read Cherries.",spreadsheet_topic:{name:"#N/A, Vlookup, Sum, Count"}},{id:10,asker_id:0,file_thumbnail_url:null,spreadsheet_software:1,text:"Can I combine CountA with other functions in a formula (like an if statement). I am so confused Help!",spreadsheet_topic:{name:"Formula	I don’t understand how to use more advanced functions"}},{id:11,asker_id:0,file_thumbnail_url:null,spreadsheet_software:1,text:'=IF(AL2="Prime ",""&AM2&" grades. Nail that project! Let our Business Pros fix your problems!",IF(AL2="Pay LB:Buy Value","We see you only have "&AD2&" credits left.  Don\'t worry,!",IF(AL2="Ask LB:Buy Value","Want an A in "&AM2&"? Get it with using this get even better work with less money!",IF(AL2="Ask LB:Buy Prime","We see you only have "&AD2&" credits left...did you know for only $3.99 / problem? Boost your "&AM2&" worknow!",IF(AL2="Ask HB:Ask","Professionals just like YOU are using got it! to boost their "&AM2&" grades. Nail that project! Let our team fix your work problems!",))))))',spreadsheet_topic:{name:"If statement  Getting error code"}},{id:12,asker_id:0,file_thumbnail_url:"https://storage.googleapis.com/wao-production.appspot.com/live_feed_samples/image13.png",spreadsheet_software:1,text:"How do I get mean and standard deviation?",spreadsheet_topic:{name:"Formula"}},{id:13,asker_id:0,file_thumbnail_url:"https://storage.googleapis.com/wao-production.appspot.com/live_feed_samples/image11.png",spreadsheet_software:1,text:"2015 and 2016 data are lumped into each month.  How do I show each month broken out by year?",spreadsheet_topic:{name:"Pivot table, Group by year"}},{id:14,asker_id:0,file_thumbnail_url:"https://storage.googleapis.com/wao-production.appspot.com/live_feed_samples/image14.png",spreadsheet_software:1,text:"Create a formula to sum amounts for each month.",spreadsheet_topic:{name:"SUM, SUMIF"}},{id:15,asker_id:0,file_thumbnail_url:"https://storage.googleapis.com/wao-production.appspot.com/live_feed_samples/image10.png",spreadsheet_software:1,text:" Should be getting a number if Sale was made on certain date but no numbers showing up.",spreadsheet_topic:{name:"0, COUNTIF"}},{id:16,asker_id:0,file_thumbnail_url:"https://storage.googleapis.com/wao-production.appspot.com/live_feed_samples/image15.png",spreadsheet_software:1,text:"Should be getting numbers for sales by representatives",spreadsheet_topic:{name:"#N/A, COUNTIF"}},{id:17,asker_id:0,file_thumbnail_url:"https://storage.googleapis.com/wao-production.appspot.com/live_feed_samples/image19.png",spreadsheet_software:1,text:"Looking to see from previous data how many of the new salespeople were deemed bad/average/good",spreadsheet_topic:{name:"#REF, VLOOKUP"}},{id:18,asker_id:0,file_thumbnail_url:"https://storage.googleapis.com/wao-production.appspot.com/live_feed_samples/image18.png",spreadsheet_software:1,text:"How do I show Elementary, Middle, High School, and College in bars with Basketball, Baseball, and Football as the legend?",spreadsheet_topic:{name:"Graph, Chart, Axis"}},{id:19,asker_id:0,file_thumbnail_url:"https://storage.googleapis.com/wao-production.appspot.com/live_feed_samples/image17.png",spreadsheet_software:1,text:"How to effectively show the breakdown of Computer Science TA ratings?",spreadsheet_topic:{name:"Graph, Chart, Axis"}},{id:20,asker_id:0,file_thumbnail_url:"https://storage.googleapis.com/wao-production.appspot.com/live_feed_samples/image12.png",spreadsheet_software:1,text:"How do I add a regression line or show some kind of trend?",spreadsheet_topic:{name:"Graph, Chart, Regression"}},{id:21,asker_id:0,file_thumbnail_url:"https://storage.googleapis.com/wao-production.appspot.com/live_feed_samples/image16.png",spreadsheet_software:1,text:"For each person code, I need 5 random sample of IDs using a formula.",spreadsheet_topic:{name:"Random sample, formula"}}]),angular.module("waoStudentApp").run(["$templateCache",function(a){a.put("views/login.html",'<div class="landing2"> <div class="landing2-topbg"> <header id="header" class="page-header landing2-header clearfix"> <div class="container"> <ul class="h-inner"> <li class="page-logo"> <a href="#/" class="m-l-10"> <img src="images/logo@2x.0a37adaf.png" alt=""> </a> </li> <li class="pull-right"> <ul class="hi-menu"> <li> <button class="btn btn-info btn-signup" ng-click="showSignupModal(\'Header\')">Start Now </button> </li> <li> <button class="btn btn-default btn-login m-l-10" ng-click="showLoginModal()">Login </button> </li> </ul> </li> </ul> </div> </header> <section class="landing2-cover text-center"> <div class="landing2-cover-content"> <div class="container animated fadeInUp"> <h3 class="c-white text-uppercase m-0">Microsoft Excel</h3> <h1 class="c-white landing2-heading">Stuck on a Pivot Table?<br class="visible-md visible-lg"> Get un-stuck right now with instant help<br class="visible-md visible-lg"> from Excel support experts </h1> <h3 class="c-white text-uppercase p-b-20 m-b-30">We also handle vlookups, formula errors,<br class="visible-md visible-lg"> and any other Excel issues you have</h3> <button class="btn btn-lg btn-info animated pulse" style="animation-delay: 2.5s" ng-click="showSignupModal(\'Header\')">Start Now </button> <p class="c-white m-t-20">{{ getAvailableMessage() }}</p> </div> </div> </section> </div> <section class="landing2-section-intro intro2 text-center"> <div class="container"> <div class="row"> <h3>NO HASSLES OR CATCHES</h3> <h2>Best of all, it’s completely free during our beta period</h2> <p class="m-t-20">Just create an account, upload your sheet and describe your issue, and connect with our live experts</p> <div class="section-bg"> <button class="btn btn-info" ng-click="showSignupModal(\'Bottom Screen\')">Start Now</button> </div> </div> </div> </section> <footer class="landing2-footer"> <div class="container"> <div class="row"> <div class="col-sm-4 col-md-3"> <div class="copyright-text"></div> </div> <div class="col-sm-8 col-md-7 text-center"> <ul class="list-inline m-t-10 text-uppercase"> <li><a href="/pages/about.html" target="_blank">About Us</a></li> <li><a href="/pages/help.html" target="_blank">Help</a></li> <li><a href="mailto:support@excelchat.co">Bug Report</a></li> <li><a href="/pages/tou.html" target="_blank">Terms of Use</a></li> <li><a href="/pages/policy.html" target="_blank">Privacy Policy</a></li> </ul> </div> </div> </div> </footer> </div> <!-- Modal Login: --> <script type="text/ng-template" id="modalLogin.html"><div class="modal-dialog">\n        <div class="card">\n            <div class="card-header bgm-cyan">\n                <button type="button" class="close" data-dismiss="modal" aria-label="Close" ng-click="hideDialog()">\n                    <span aria-hidden="true">&times;</span></button>\n                <h2>LOGIN</h2>\n            </div>\n            <div class="alert alert-danger" ng-show="error_message">{{ error_message }}</div>\n            <div class="card-body card-padding">\n                <div class="login-form">\n                    <form role="form">\n                        <div class="form-group fg-line">\n                            <label for="exampleInputEmail1">EMAIL</label>\n                            <input type="email" class="form-control input-sm" id="exampleInputEmail1"\n                                   placeholder="Enter email" ng-model="input_login.email">\n                        </div>\n                        <div class="form-group fg-line">\n                            <label for="exampleInputPassword1">PASSWORD</label>\n                            <input type="password" class="form-control input-sm" id="exampleInputPassword1"\n                                   placeholder="Password" ng-model="input_login.password"\n                                   ng-keyup="$event.keyCode == 13 && loginEmail()">\n                        </div>\n\n                        <div class="row m-t-10">\n                            <div class="col-sm-8 col-sm-offset-2">\n                                <button type="button" class="btn btn-info btn-lg btn-block" ng-click="loginEmail()"\n                                        ng-disabled="submitting">\n                                    LOGIN\n                                </button>\n                            </div>\n                        </div>\n                    </form>\n\n                    <div class="text-hline m-y-30">\n                        <span class="lleft"><hr/></span>\n                        <span class="ltext">OR</span>\n                        <span class="lright"><hr/></span>\n                    </div>\n\n                    <div class="row">\n                        <div class="col-sm-8 col-sm-offset-2 m-b-20">\n                            <button class="btn btn-block btn-social btn-lg btn-facebook"\n                                    ng-click="connectFacebook()" ng-disabled="submitting">\n                                <span class="fa fa-facebook"></span>LOGIN WITH FACEBOOK\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div></script> <!-- Modal Sign Up: --> <script type="text/ng-template" id="modalSignup.html"><div class="modal-dialog">\n        <div class="card">\n            <div class="card-header bgm-cyan">\n                <button type="button" class="close" data-dismiss="modal" aria-label="Close" ng-click="hideDialog()">\n                    <span aria-hidden="true">&times;</span></button>\n                <h2>SIGN UP</h2>\n            </div>\n            <div class="alert alert-danger" ng-show="error_message">{{ error_message }}</div>\n            <div class="card-body card-padding">\n                <div class="login-form">\n                    <form role="form">\n                        <div class="row">\n                            <div class="col-md-6">\n                                <div class="form-group fg-line">\n                                    <label for="exampleInputEmail1">EMAIL</label>\n                                    <input type="email" class="form-control input-sm" id="exampleInputEmail1"\n                                           placeholder="Enter email" ng-model="input_login.email">\n                                </div>\n                            </div>\n                            <div class="col-md-6">\n                                <div class="form-group">\n                                    <div class="fg-line">\n                                        <label class="control-label" for="input11">NICKNAME</label>\n                                        <input type="text" class="form-control" id="input11"\n                                               ng-model="input_login.nickname">\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                        <div class="row">\n                            <div class="col-md-6">\n                                <div class="form-group fg-line">\n                                    <label for="exampleInputPassword1">PASSWORD</label>\n                                    <input type="password" class="form-control input-sm" id="exampleInputPassword1"\n                                           placeholder="Password" ng-model="input_login.password">\n                                </div>\n                            </div>\n                            <div class="col-md-6">\n                                <div class="form-group fg-line">\n                                    <label for="exampleInputPassword2">CONFIRM PASSWORD</label>\n                                    <input type="password" class="form-control input-sm" id="exampleInputPassword2"\n                                           placeholder="Confirm password" ng-model="input_login.confirm_password">\n                                </div>\n                            </div>\n                        </div>\n                        <div class="form-group">\n                            <div class="fg-line">\n                                <label class="control-label" for="input14">EDUCATION LEVEL</label>\n                                <select class="form-control" id="input14" ng-model="input_login.grade_id"\n                                        ng-options="grade.id as grade.name for grade in grade_list"></select>\n                            </div>\n                        </div>\n\n                        <div class="row">\n                            <div class="col-sm-8 col-sm-offset-2">\n                                <button type="button" class="btn btn-info btn-lg btn-block m-t-10"\n                                        ng-click="signUpEmail()" ng-disabled="submitting">SIGN UP\n                                </button>\n                            </div>\n                        </div>\n                    </form>\n                    <div class="text-hline m-y-30">\n                        <span class="lleft"><hr/></span>\n                        <span class="ltext">OR</span>\n                        <span class="lright"><hr/></span>\n                    </div>\n\n                    <div class="row">\n                        <div class="col-sm-8 col-sm-offset-2 m-b-20">\n                            <button class="btn btn-block btn-social btn-lg btn-facebook"\n                                    ng-click="connectFacebook()" ng-disabled="submitting">\n                                <span class="fa fa-facebook"></span>SIGN UP WITH FACEBOOK\n                            </button>\n                        </div>\n                    </div>\n\n                    <div class="m-y-20 text-center">By signing up, you agree to ExcelChat! <a\n                            href="/pages/tou.html" style="display:inline-block;" target="_blank">Terms of Use</a></div>\n                </div>\n            </div>\n        </div>\n    </div></script> <!-- Modal account --> <script type="text/ng-template" id="modalAccount.html"><div class="modal-dialog">\n        <div class="card">\n            <div class="card-header bgm-cyan">\n                <h2>ACCOUNT INFORMATION</h2>\n            </div>\n            <div class="alert alert-danger" ng-show="error_message">{{ error_message }}</div>\n            <div class="card-body card-padding">\n                <div class="form-group">\n                    <div class="fg-line">\n                        <label class="control-label" for="input11">NICKNAME</label>\n                        <input type="text" class="form-control" id="input11" ng-model="input_login.nickname">\n                    </div>\n                </div>\n                <div class="form-group">\n                    <div class="fg-line">\n                        <label class="control-label" for="input14">EDUCATION LEVEL</label>\n                        <select class="form-control" id="input14" ng-model="input_login.grade_id"\n                                ng-options="grade.id as grade.name for grade in grade_list"></select>\n                    </div>\n                </div>\n                <div class="text-right p-t-10">\n                    <button class="btn btn-info" type="button" ng-click="newInfo()" ng-disabled="submitting">SUBMIT\n                    </button>\n                </div>\n            </div>\n        </div>\n    </div></script>'),a.put("views/main.html",'<header id="header" class="page-header" class="clearfix" data-ma-theme="teal"> <ul class="h-inner"> <!--<li class="hi-trigger ma-trigger" data-ma-action="sidebar-open" data-ma-target="#sidebar">\n            <div class="line-wrap">\n                <div class="line top"></div>\n                <div class="line center"></div>\n                <div class="line bottom"></div>\n            </div>\n        </li>--> <li class="page-logo"> <a href="#/" class="m-l-10"> <img src="images/logo@2x.0a37adaf.png" alt=""> </a> </li> <li class="pull-right"> <ul class="hi-menu"> <li class="dropdown"> <a data-toggle="dropdown" href=""> <i class="him-icon zmdi zmdi-account-circle"></i> </a> <ul class="dropdown-menu dm-icon pull-right"> <li> <a href="/#/profile"><i class="zmdi zmdi-settings"></i> Account Settings</a> </li> <li> <a href="" ng-click="logout()"><i class="zmdi zmdi-power"></i> Logout</a> </li> </ul> </li> </ul> </li> </ul> </header> <div id="main"> <!-- student homepage: --> <div class="page-content student-home"> <div class="student-home-fixed-header"> <div class="p-fixed"> <div class="student-ask-in-home p-20"> <div class="container"> <div class="row"> <div class="col-md-7 text-right"> <h4 class="m-0">Want to instantly connect with an expert?<br>They’re standing by waiting to help!</h4> </div> <div class="col-md-5 text-left"> <button class="btn btn-info btn-lg btn-question-add" ng-click="showNewProblemModal()" ng-disabled=" (asker_state && asker_state.state!==null && asker_state.state!=\'Rating\') "> <!-- <i class="him-icon zmdi zmdi-plus"></i> --> START SESSION </button> </div> </div> </div> </div> <div class="tab-nav" data-tab-color="teal"> <div class="container"> <ul class="tab-nav" data-tab-color="teal"> <li ng-class=" isLiveFeedTabSelected()?\'active\':\'\' "><a href="" ng-click="showLiveFeed()">Live Feed</a></li> <li ng-class=" isMyQuestionSelected()?\'active\':\'\' "><a href="" ng-click="showMyQuestion()">My Questions</a></li> </ul> </div> </div> </div> </div> <div class="container"> <!-- tab content: --> <div class="tab-content"> <div class="row row-10" style="margin-top:10px" ng-show="problems.length"> <!-- col: --> <div class="col-sm-6 col-md-4" ng-repeat=" problem in problems "> <div ng-class="\'thumbnail ex-item ex-item-\' + (problem.problem_state.state==\'Chatting\'?\'working\':(problem.problem_state.state==\'Rating\' || problem.problem_state.state==\'Complete\'?\'explained\':(problem.problem_state.state==\'Failed\'?\'cancel\':\'connecting\')))"> <a ng-click="isMyQuestion(problem)?goToProblemDetail(problem.id):\'\'" ng-style="{cursor: isMyQuestion(problem)?\'pointer\':\'\'}"> <div class="ex-item--cover ratio-169"><img ng-src="{{ getThumbnail(problem) }}"></div> </a> <span class="ex-item--status">{{ problem.problem_state.state==\'Chatting\'?\'In Progress\':(problem.problem_state.state==\'Rating\' || problem.problem_state.state==\'Complete\'?\'Explained\':(problem.problem_state.state==\'Failed\'?\'Failed\':\'Connecting\')) }}</span> <div class="ex-item--rating" ng-show="problem.explainer_rating"> <i ng-repeat=" n in [1, 2, 3, 4, 5] " ng-class=" (!problem.explainer_rating || n > problem.explainer_rating.score) ? \'fa fa-star-o\' : \'fa fa-star\' "></i> </div> <div class="caption"> <div class="ex-item--info-ext"> <span class="ex-item--datetime"><i class="zmdi zmdi-time"></i> {{ getTime(problem.created) }}</span> <span class="text-muted m-x-5">&middot;</span> <span class="ex-item--tag-basic" data-ellipsis>Tags: {{ problem.spreadsheet_topic.name }}{{ problem.spreadsheet_error.name?\', #\'+problem.spreadsheet_error.name:\'\' }}</span> </div> <div class="ex-item--text ex-item--desc" data-ellipsis data-ng-bind="problem.text" data-ellipsis-symbol="..." data-separator=" "></div> </div> </div> </div><!-- /col --> </div> <div class="empty-content brd-2" ng-show="!problems.length && currentPage == 1"> <div class="empty-content--icon"><i class="zmdi zmdi-assignment-o"></i></div> <div class="empty-content--text"> {{ isMyQuestionSelected()?"You haven\'t asked any question yet!":\'\' }}</div> <div class="empty-content--cta"> <button class="btn btn-info btn-lg waves-effect" ng-click="showNewProblemModal()" ng-disabled=" (asker_state && asker_state.state!==null && asker_state.state!=\'Rating\') " type="button"><i class="him-icon zmdi zmdi-plus m-r-10"></i> Start a Session Now </button> </div> </div> </div> <!-- /tab content --> <div class="text-center m-b-30 m-t-20" ng-show="problems.length"> <div class="btn-group m-b-30"> <button type="button" class="btn btn-default waves-effect" ng-show=" currentPage > 1 " ng-click="goToPreviousPage()"><i class="zmdi zmdi-chevron-left"></i> Previous </button> <button type="button" class="btn btn-default waves-effect" disabled>page: {{ currentPage }}</button> <button type="button" class="btn btn-default waves-effect" ng-show=" hasNextPage " ng-click="goToNextPage()">Next <i class="zmdi zmdi-chevron-right"></i></button> </div> </div> </div> </div> <!-- /student homepage --> </div> <footer class="page-footer"> <ul class="f-menu list-inline"> <li class="copyright-text">&copy; 2016 ExcelChat!</li> <li><a href="/pages/about.html" target="_blank">About Us</a></li> <li><a href="/pages/help.html" target="_blank">Help</a></li> <li><a href="mailto:support@excelchat.co">Bug Report</a></li> <li><a href="/pages/tou.html" target="_blank">Terms of Use</a></li> <li><a href="/pages/policy.html" target="_blank">Privacy Policy</a></li> </ul> </footer> <!-- Modal Post a Question --> <script type="text/ng-template" id="newProblemModal.html"><div class="card">\n        <div class="card-header bgm-cyan">\n            <button type="button" class="close" data-dismiss="modal" aria-label="Close" ng-click="hideDialog()"><span\n                    aria-hidden="true">&times;</span></button>\n            <h2>POST A QUESTION</h2>\n        </div>\n        <div class="alert alert-danger alert-dismissible" role="alert" ng-show="new_problem_error">\n            <button type="button" class="close" ng-click="resetProblemError()"><span aria-hidden="true">×</span>\n            </button>\n            <div>{{ new_problem_error }}</div>\n        </div>\n        <div class="card-body card-padding">\n            <div class="form-group">\n                <div class="fg-line s2-fw">\n                    <label class="control-label" for="">What spreadsheet software are you using:</label>\n                    <select class="form-control" ng-model="input.spreadsheet_software"\n                            ng-options=" spreadsheet_software.id as spreadsheet_software.name for spreadsheet_software in spreadsheet_software_list ">\n                    </select>\n                </div>\n            </div>\n            <div class="form-group">\n                <div class="fg-line s2-fw">\n                    <label class="control-label" for="">I’d like a Spreadsheet Expert to help me with:</label>\n                    <select class="form-control" ng-model="input.category"\n                            ng-options=" category.id as category.name for category in categories "\n                            ng-change="changeAskTopic()">\n                    </select>\n                </div>\n            </div>\n            <div class="form-group" ng-show="input.category == -10">\n                <div class="fg-line s2-fw">\n                    <label class="control-label" for="">Select the function you need help with:</label>\n                    <angucomplete-alt id="topic" focus-out="clearInput(input.topic, \'topic\')"\n                                      placeholder="Choose your question" pause="100" selected-object="input.topic"\n                                      local-data="spreadsheet_topic_list" search-fields="name" title-field="name"\n                                      minlength="0" input-class="form-control form-control-small"\n                                      match-class="highlight" input-changed="inputTopicChanged"\n                                      initial-value=" input.topic.originalObject.name "\n                    />\n                </div>\n            </div>\n            <div class="form-group">\n                <div class="fg-line">\n                    <label class="control-label" for="">Link to a public shared google sheet (optional)</label>\n                    <input type="text" class="form-control"\n                           placeholder="eg: https://docs.google.com/spreadsheets/d/1K1gtN86mFGPzg8jyCiQFOXPY4AK2aAamzYX123qbB8Y/edit#gid=782596212"\n                           ng-model="input.spreadsheet_shared_url">\n                </div>\n            </div>\n            <div class="form-group">\n                <label class="control-label">Attach a file (optional):</label>\n                <div class="input-group m-t-10">\n                    <!-- fake button: -->\n                                <span class="input-group-btn">\n                                    <label class="btn btn-default m-r-10" for="myInputFile">Browse...</label>\n                                </span>\n                    <!-- fake file name:-->\n                    <div class="fg-line">\n                        <input type="text" id="myFakeInputFile" class="form-control" disabled\n                               placeholder="No file chosen" ng-model=" input.file.name ">\n                    </div>\n                    <!-- button remove: -->\n                                <span class="input-group-btn">\n                                    <button class="btn btn-link" type="button" ng-click="removeAttachment()"\n                                            ng-show=" input.file "><i class="zmdi zmdi-close text-danger"></i></button>\n                                </span>\n                </div>\n                <!-- input file:-->\n                <input type="file" class="form-control" id="myInputFile" ngf-accept="file_option.accept" ngf-select\n                       ngf-change="validateFileAttachment($file)"\n                       ng-model="input.file"\n                       style="position:absolute;left:0px;top:0;width:0px;height:0px; overflow: hidden;visibility:hidden">\n            </div>\n\n            <div class="form-group">\n                <div class="fg-line">\n                    <label class="control-label" for="">Please provide additional information that your Expert will find\n                        useful to help solve your problem:</label>\n                    <textarea class="form-control" rows="4" placeholder="Enter your content..."\n                              ng-model="input.text"></textarea>\n                </div>\n            </div>\n\n            <div class="clearfix p-t-10">\n\n                <button class="btn btn-info btn-lg pull-right" type="button"\n                        ng-click="postNewProblem()" ng-disabled="file_uploading_indicator_show">\n                    <span ng-show="file_uploading_indicator_show" class="loading m-r-5 p-relative" style="top:2px;"><i\n                            class="loading-icon icon-light icon-16"></i></span>\n                    {{ file_uploading_indicator_show?\'SUBMITTING...\':\'SUBMIT\' }}\n                </button>\n            </div>\n        </div>\n    </div></script> <script type="text/ng-template" id="matchingExpertModal.html"><div class="modal-content">\n        <div class="modal-body">\n            <div class="p-30  text-center">\n                <p><img src="images/icons/loader.17d1414d.svg" width="48" height="48" alt="Loading..."></p>\n                <div class="lead m-0">Matching you with an expert...</div>\n            </div>\n        </div>\n    </div></script> <style>.angucomplete-dropdown {\n        overflow-y: auto;\n        max-height: 200px;\n    / / your preference\n    }\n\n    .highlight {\n        color: #ff0000;\n    }\n\n    .angucomplete-new {\n        background-color: #f2f2f2;\n    }</style> <script type="text/ng-template" id="rating.html"><div class="card">\n        <div class="card-header bgm-cyan">\n            <h2>PLEASE RATE YOUR EXPERIENCE</h2>\n        </div>\n        <div class="card-body">\n            <div class="row row-10">\n                <div class="col-md-7">\n                    <!-- chat: -->\n                    <div class="chat" style="overflow-y:scroll; height: 420px;">\n                        <div class="ex-messages">\n                            <ul class="ex-messages-content clearfix">\n                                <!-- right (student) -->\n                                <li class="ex-message ex-message-personal" ng-if="rating_problem.file_thumbnail_url">\n                                    <figure class="avatar"><img ng-src="images/profile-pics/7.55428e54.jpg"></figure>\n                                    <!-- thumbnail: -->\n                                    <div class="message-photo">\n                                        <img ng-src="{{ rating_problem.file_thumbnail_url }}">\n                                    </div>\n                                    <!-- buttons: -->\n                                    <div class="timestamp">{{ rating_problem.created | date:\'HH:mm\'}}</div>\n                                </li>\n\n                                <!-- right (student) -->\n                                <li class="ex-message ex-message-personal"\n                                    ng-if="rating_problem.spreadsheet_shared_thumbnail_url">\n                                    <figure class="avatar"><img ng-src="images/profile-pics/7.55428e54.jpg"></figure>\n                                    <div class="message-photo">\n                                        <img ng-src="{{ rating_problem.spreadsheet_shared_thumbnail_url }}">\n                                    </div>\n                                    <div class="timestamp">{{ rating_problem.created | date:\'HH:mm\'}}</div>\n                                </li>\n\n                                <!-- right (student) -->\n                                <li class="ex-message ex-message-personal">\n                                    <figure class="avatar"><img ng-src="images/profile-pics/7.55428e54.jpg"></figure>\n                                    <!--<div class="message-photo"><a href="https://docs.google.com/spreadsheets/d/1qlXaN2cglFW2aciA5VaNUrskG8l0B_C8rSqXpfZ0buc/edit?usp=sharing" target="iframePreview" title="https://docs.google.com/spreadsheets/d/1qlXaN2cglFW2aciA5VaNUrskG8l0B_C8rSqXpfZ0buc/edit?usp=sharing"><img src="images/samples/2.21d4bafb.jpg"></a></div>-->\n\n                                    <ul class="message-question clearfix">\n                                        <li>\n                                            <small>SPREADSHEET SOFTWARE USED:</small>\n                                            <span>{{ getSoftwareName(rating_problem.spreadsheet_software) }}</span>\n                                        </li>\n                                        <li>\n                                            <small>MY QUESTION IS ABOUT:</small>\n                                            <span>{{ rating_problem.spreadsheet_topic.name }}</span>\n                                        </li>\n                                        <li>\n                                            <small>DESCRIPTION:</small>\n                                            <span>{{ rating_problem.text }}</span>\n                                        </li>\n                                    </ul>\n                                    <div class="timestamp">{{ rating_problem.created | date:\'HH:mm\'}}</div>\n                                </li>\n\n                                <!-- right -->\n                                <li ng-repeat=" explanation in rating_explanations"\n                                    ng-class="\'ex-message \' + {true:\'ex-message-personal\', false:\'\'}[explanation.asker_id!==null]">\n                                    <figure class="avatar"><img ng-src="\n\n\n\n\n\n                                            {{ explanation.asker_id!==null?\'images/profile-pics/7.55428e54.jpg\':\'images/profile-empty-icon.2d84e19d.png\'}}">\n                                    </figure>\n                                    <!-- thumbnail: -->\n                                    <div class="message-photo" ng-if="explanation.file_thumbnail_url">\n                                        <img ng-src="{{ explanation.file_thumbnail_url }}">\n                                    </div>\n                                    <div style="word-break: break-all"\n                                         ng-bind-html="explanation.message | linky:\'_blank\'"></div>\n                                    <div class="timestamp">{{ explanation.created | date:\'HH:mm\' }}</div>\n                                </li>\n                            </ul>\n                        </div>\n                    </div>\n                    <!-- /chat -->\n                </div>\n                <div class="col-md-5">\n                    <div class="p-20 text-center">\n                        <div ng-model=" point " class="m-t-20 m-b-10" ng-raty="ratyOptions"></div>\n                        <p class="m-b-20 lead" ng-show=" point>0 "><strong>Thank you for your\n                            rating: {{ point }} {{ plural(point) }}</strong></p>\n\n                        <p class="m-t-30 p-t-20 m-b-20 center-block" style="max-width: 380px;"\n                           ng-show=" point>0 && survey_url">Please give additional feedback to help us improve ExcelChat!</p>\n                        <ul class="list-inline text-center m-t-10">\n                            <li>\n                                <button class="btn btn-warning" type="button" ng-show=" point>0 && survey_url "\n                                        ng-click=" takeSurvey(point) ">TAKE SURVEY\n                                </button>\n                            </li>\n                            <li>\n                                <button class="btn btn-info" type="button" ng-show=" point>0 "\n                                        ng-click=" rateExplanation(point) ">CLOSE\n                                </button>\n                            </li>\n                        </ul>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div></script> <script type="text/ng-template" id="autocomplete-custom.html"><div class="angucomplete-holder" ng-class="{\'angucomplete-dropdown-visible\': showDropdown}">\n        <input ng-model="searchStr"\n               ng-disabled="disableInput"\n               type="text"\n               placeholder="{{ placeholder }}"\n               ng-focus="onFocusHandler()"\n               class="{{ inputClass }}"\n               ng-focus="resetHideResults()"\n               ng-blur="hideResults($event)"\n               autocapitalize="off"\n               autocorrect="off"\n               autocomplete="off"\n               ng-change="inputChangeHandler(searchStr)"/>\n        <div class="angucomplete-dropdown" ng-show="showDropdown">\n            <div class="angucomplete-searching" ng-show="searching" ng-bind="textSearching"></div>\n            <div class="angucomplete-searching" ng-show="!searching && (!results || results.length == 0)"\n                 ng-bind="textNoResults"></div>\n            <div class="angucomplete-row" ng-repeat="result in results" ng-click="selectResult(result)"\n                 ng-mouseenter="hoverRow($index)" ng-class="{\'angucomplete-selected-row\': $index == currentIndex}">\n                <div ng-if="imageField" class="angucomplete-image-holder">\n                    <img ng-if="result.image && result.image != \'\'" ng-src="{{ result.image }}"\n                         class="angucomplete-image"/>\n                    <div ng-if="!result.image && result.image != \'\'" class="angucomplete-image-default"></div>\n                </div>\n                <div class="angucomplete-title" ng-if="matchClass" ng-bind-html="result.title"></div>\n                <div class="angucomplete-title" ng-if="!matchClass">{{ result.title }}</div>\n                <div ng-if="matchClass && result.description && result.description != \'\'"\n                     class="angucomplete-description" ng-bind-html="result.description"></div>\n                <div ng-if="!matchClass && result.description && result.description != \'\'"\n                     class="angucomplete-description">{{ result.description }}</div>\n            </div>\n            <div class="angucomplete-row"\n                 ng-click="selectResult({title: searchStr, originalObject: { name: searchStr, id: -1 }})"\n                 ng-mouseenter="hoverRow(results.length)"\n                 ng-class="{true: \'angucomplete-selected-row\', false: \'angucomplete-new\'}[results.length == currentIndex]"\n                 ng-hide="!searchStr || results[0].originalObject.name.toLowerCase() == searchStr.toLowerCase()">\n                <div class="angucomplete-title">Add New Option: <b>{{ searchStr }}</b></div>\n            </div>\n        </div>\n    </div></script> <!-- Modal message --> <script type="text/ng-template" id="repostModal.html"><div class="modal-body">\n        <div class="p-y-20 text-center">\n            <p><i class="zmdi zmdi-info zmdi-hc-4x c-cyan"></i></p>\n            <p class="lead">Sorry! All experts are busy right now. Please re-post your question or come back later!</p>\n            <div class="text-center m-t-30">\n                <button class="btn btn-default m-r-10" type="button" ng-click="hideDialog()">Come Back Later</button>\n                <button class="btn btn-info p-x-30" type="button" ng-click="showNewProblemModal()">Re-post</button>\n            </div>\n        </div>\n    </div></script> <script type="text/ng-template" id="unavailableModal.html"><div class="modal-body">\n        <div class="p-y-20 text-center">\n            <p><i class="zmdi zmdi-info zmdi-hc-4x c-cyan"></i></p>\n            <p class="lead">{{ unavailable_message }}</p>\n            <div class="text-center m-t-30">\n                <button class="btn btn-default m-r-10" type="button" ng-click="hideDialog()">Come Back Later</button>\n            </div>\n        </div>\n    </div></script>'),
a.put("views/problem.html",'<header id="header" class="page-header" class="clearfix" data-ma-theme="teal"> <ul class="h-inner"> <li class="page-logo"> <a href="#/" class="m-l-10"> <img src="images/logo@2x.0a37adaf.png" alt=""> </a> </li> <li class="pull-right"> <ul class="hi-menu"> <li class="dropdown"> <a data-toggle="dropdown" href=""> <i class="him-icon zmdi zmdi-account-circle"></i> </a> <ul class="dropdown-menu dm-icon pull-right"> <li> <a href="/#/profile"><i class="zmdi zmdi-settings"></i> Account Settings</a> </li> <li> <a href="" ng-click="logout()"><i class="zmdi zmdi-power"></i> Logout</a> </li> </ul> </li> </ul> </li> </ul> </header> <div id="main"> <!-- student chat: --> <div class="page-content page-workspace student-workspace"> <div class="container-fluid"> <div class="expert-col-sbs clearfix"> <!-- chat:--> <div class="expert-col-sbs-left expert-col-sbs-chat"> <div class="page-heading p-relative"> <div class="p-absolute" style="top:0px; right:0; height:48px; padding-left:15px"> <span ng-show="chat_enabled" class="expert-working-timer di-block">Session timer: <strong>{{ convertSessionTime() }}</strong></span> <button class="btn btn-danger btn-sm btn-stop-working autohide" ng-click="showEndChatSessionConfirmation()" ng-show=" chat_enabled "> <i class="zmdi zmdi-close"></i><span>End Session</span> </button> <button class="btn btn-link btn-sm btn-working-back m-l-5" ng-click="goToMain()" ng-show=" !chat_enabled "> <i class="zmdi zmdi-chevron-left m-r-5"></i><span>Back</span> </button> </div> <h3 class="page-heading--title">Chat with an Expert</h3> </div> <div class="expert-question-outer"> <div class="card p-0 brd-2" style="overflow-y:hidden"> <!-- chat: --> <div class="chat p-absolute" style="top:0; left:0; right:0; bottom: 0; padding-bottom:43px; overflow-y:scroll" id="list_chat"> <div class="ex-messages"> <ul class="ex-messages-content clearfix"> <!-- right (student) --> <!--<li class="ex-message ex-message-personal first">--> <li ng-repeat=" message in messages " ng-class="\'ex-message\' + (message.asker_id!==null?\' ex-message-personal\':\'\')"> <figure class="avatar"><img ng-src="\n                                                    {{ message.asker_id!==null?\'images/profile-empty-icon.2d84e19d.png\':\'images/profile-empty-icon.2d84e19d.png\'}}"> </figure> <!-- thumbnail: --> <div class="message-photo" ng-show="message.type != \'question\' && message.type != \'text\'"> <a href="" ng-click="showPreview(message)"><img ng-src="{{ message.file_thumbnail_url?message.file_thumbnail_url:excel_thumbnail }}"></a> <div class="btn-group p-absolute expert-file-actions"> <button ng-show=" message.file_id || message.type == \'image\'" ng-click="showPreview(message)" class="btn btn-default btn-sm" title="Open in Document Preview"><i class="zmdi zmdi-search"></i></button> <button ng-show="message.file_download" ng-click="downloadFile(message.file_download)" class="btn btn-default btn-sm" title="Download this file"><i class="zmdi zmdi-download"></i></button> </div> </div> <!-- buttons: --> <ul class="message-question clearfix" ng-show="message.type == \'question\'"> <li> <small>SPREADSHEET SOFTWARE USED:</small> <span>{{ message.spreadsheet_software }}</span> </li> <li> <small>MY QUESTION IS ABOUT:</small> <span>{{ message.spreadsheet_topic }}</span> </li> <li> <small>DESCRIPTION:</small> <span>{{message.message}}</span> </li> </ul> <span ng-show="message.type == \'text\'" ng-bind-html="message.message | linky:\'_blank\'"></span> <div class="timestamp">{{ message.created | date:\'HH:mm\' }}</div> </li> </ul> </div> </div> <!-- /chat --> <!-- chat compose: --> <div class="ex-message-compose input-group" ng-show="chat_enabled"> <input type="text" class="form-control" placeholder="Add a quick response" ng-model="input.chat_message" enter-submit id="quick_chat"> <span class="input-group-btn"> <!-- button add file: --> <label class="btn btn-default btn-attach-file" for="myfile"> <i class="zmdi zmdi-attachment-alt p-relative"></i> </label> <!-- button remove: --> <button class="btn btn-default btn-remove-file" ng-show=" input.file " ng-disabled=" file_uploading_indicator_show " ng-click="removeAttachment()"> <i class="zmdi zmdi-close" ng-show="file_uploading_indicator_show==false"></i> <img ng-show=" file_uploading_indicator_show " src="images/icons/loader.17d1414d.svg" width="16" class="p-relative" id="idFileLoader"> </button> <!-- badge: --> <span class="ex-message-attached-badge" ng-show=" input.file ">1</span> </span> <input type="file" ngf-select ngf-accept="file_option.accept" id="myfile" name="myfile" ng-model="input.file" style="opacity:0; position: absolute; left:-999px; top:-999px" ngf-change="validateFileAttachment($file); focusInput()"> </div> <!-- /chat compose --> </div> </div> </div> <!-- preview:--> <div class="expert-col-sbs-right expert-col-sbs-preview"> <div class="page-heading clearfix"> <h3 class="page-heading--title">Document Preview</h3> </div> <div class="expert-question-outer"> <div class="card expert-preview-area"> <iframe name="iframePreview" class="expert-question-preview-iframe w-100 h-100" frameborder="0" ng-src="{{ preview_url }}"></iframe> </div> </div> </div> </div> </div> </div> <!-- /student chat --> </div> <!-- Modal confirm stop working --> <script type="text/ng-template" id="endChatSessionModal.html"><div class="card">\n        <div class="card-header bgm-cyan">\n            <button type="button" class="close" aria-label="Close" ng-click="hideDialog()"><span\n                    aria-hidden="true">&times;</span></button>\n            <h2>CONFIRMATION</h2>\n        </div>\n        <div class="card-body p-20 text-center">\n            <p class="m-b-5"><i class="zmdi zmdi-alert-triangle zmdi-hc-5x text-muted"></i></p>\n            <p class="m-b-30">Are you sure you want to end the session?</p>\n            <ul class="list-inline text-center m-t-10 m-b-0">\n                <li>\n                    <button class="btn btn-default" type="button" ng-click="hideDialog()">CANCEL\n                    </button>\n                </li>\n                <li>\n                    <button class="btn btn-danger" type="button"\n                        ng-click="endChatSession()">OK\n                    </button>\n                </li>\n            </ul>\n        </div>\n    </div></script> <!-- Modal rate --> <script type="text/ng-template" id="ratingModal.html"><div class="card">\n            <div class="card-header bgm-cyan">\n                <!--<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>-->\n                <h2>PLEASE RATE YOUR EXPERIENCE</h2>\n            </div>\n            <div class="card-body card-padding text-center">\n                <div ng-model=" input.rating " class="m-t-20 m-b-10" ng-raty="ratyOptions"></div>\n                <p class="m-b-20 lead" ng-show=" input.rating "><strong>Thank you for your rating: {{ input.rating }} {{plural(input.rating)}}</strong>\n                </p>\n\n                <p class="m-t-30 p-t-20 m-b-20 center-block" style="max-width: 380px;" ng-show=" input.rating && survey_url">Please give additional feedback to help us improve ExcelChat!</p>\n                <ul class="list-inline text-center m-t-10" ng-show=" input.rating ">\n                    <li>\n                        <button class="btn btn-warning" type="button" ng-click="takeSurvey()" ng-show="survey_url" ng-disabled="ratingExplanation">TAKE SURVEY</button>\n                    </li>\n                    <li>\n                        <button class="btn btn-info" type="button" ng-click="rateExplanation()" ng-disabled="ratingExplanation">CLOSE</button>\n                    </li>\n                </ul>\n            </div>\n        </div></script>'),a.put("views/profile.html",'<header id="header" class="page-header" class="clearfix" data-ma-theme="teal"> <ul class="h-inner"> <li class="page-logo"> <a href="#/" class="m-l-10"> <img src="images/logo@2x.0a37adaf.png" alt=""> </a> </li> <li class="pull-right"> <ul class="hi-menu"> <li class="dropdown"> <a data-toggle="dropdown" href=""> <i class="him-icon zmdi zmdi-account-circle"></i> </a> <ul class="dropdown-menu dm-icon pull-right"> <li> <a href="#/profile"><i class="zmdi zmdi-settings"></i> Account Settings</a> </li> <li> <a href="" ng-click="logout()"><i class="zmdi zmdi-power"></i> Logout</a> </li> </ul> </li> </ul> </li> </ul> </header> <div id="main"> <!-- student profile: --> <div class="page-content page-profile student-profile"> <ol class="breadcrumb" style="margin-bottom:18px"> <li><a href="#/">Home</a></li> <li class="active">Account Settings</li> </ol> <div class="container"> <div class="page-heading clearfix"> <h3 class="page-heading--title">Account Settings</h3> </div> <div class="tab-content"> <div class="row row-10" style="margin-top:20px"> <!-- Profile Information: --> <div class="col-sm-6"> <div class="card"> <div class="card-header ch-alt"> <h2>Profile Information</h2> </div> <div class="alert alert-danger" ng-show="profile_error_msg"> <a href="" class="close" aria-label="close" ng-click="resetProfileError()">&times;</a> {{ profile_error_msg }} </div> <div class="alert alert-success" ng-show="profile_success_msg"> <a href="" class="close" aria-label="close" ng-click="resetProfileSuccess()">&times;</a> {{ profile_success_msg }} </div> <div class="card-body card-padding"> <div class="form-group m-b-30"> <div class="fg-line"> <label class="fg-label">Nickname</label> <input type="text" class="form-control" ng-model="input.nickname" disabled> </div> </div> <div class="form-group"> <div class="fg-line"> <label class="control-label" for="input14">Education level</label> <select class="form-control" id="input14" ng-model="input.grade_id" ng-options="grade.id as grade.name for grade in grade_list"></select> </div> </div> <div class="form-group m-b-30"> <div class="fg-line"> <label class="fg-label">Email address</label> <input type="email" class="form-control" ng-model="input.email" disabled> </div> </div> <div class="text-right"> <button class="btn btn-info" ng-click="updateInfo()">UPDATE PROFILE</button> </div> <style>.intl-tel-input { /*fixed display for telInput*/\n                                        width: 100%;\n                                    }</style> </div> </div> </div><!-- /col --> <!-- Change Password: --> <div class="col-sm-6"> <div class="card"> <div class="card-header ch-alt"> <h2>Change Password</h2> </div> <div class="alert alert-danger" ng-show="password_error_msg"> <a href="" class="close" aria-label="close" ng-click="resetPasswordError()">&times;</a> {{ password_error_msg }} </div> <div class="alert alert-success" ng-show="password_success_msg"> <a href="" class="close" aria-label="close" ng-click="resetPasswordSuccess()">&times;</a> {{ password_success_msg }} </div> <div class="card-body card-padding"> <div class="form-group m-b-30"> <div class="fg-line"> <label class="fg-label">Current Password</label> <input type="password" class="form-control" ng-model="input.current_password" placeholder="" ng-disabled="account_type == \'facebook\'"> </div> </div> <div class="form-group m-b-30"> <div class="fg-line"> <label class="fg-label">New Password</label> <input type="password" class="form-control" ng-model="input.new_password" placeholder="" ng-disabled="account_type == \'facebook\'"> </div> </div> <div class="form-group m-b-30"> <div class="fg-line"> <label class="fg-label">Confirm New Password</label> <input type="password" class="form-control" ng-model="input.confirm_password" placeholder="" ng-disabled="account_type == \'facebook\'"> </div> </div> <div class="text-right"> <button class="btn btn-info" ng-disabled="account_type == \'facebook\'" ng-click="changePassword()">CHANGE PASSWORD </button> </div> </div> </div> </div><!-- /col --> </div> </div> <!-- /tab content --> </div> </div> <!-- /student profile --> </div> <footer class="page-footer div-cell"> <ul class="f-menu list-inline"> <li class="copyright-text">&copy; 2016 ExcelChat!</li> <li><a href="/pages/about.html" target="_blank">About Us</a></li> <li><a href="/pages/help.html" target="_blank">Help</a></li> <li><a href="mailto:support@excelchat.co">Bug Report</a></li> <li><a href="/pages/tou.html" target="_blank">Terms of Use</a></li> <li><a href="/pages/policy.html" target="_blank">Privacy Policy</a></li> </ul> </footer>')}]);